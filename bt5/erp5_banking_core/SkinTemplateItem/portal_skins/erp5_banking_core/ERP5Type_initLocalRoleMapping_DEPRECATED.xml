<?xml version="1.0"?>
<ZopeData>
  <record id="1" aka="AAAAAAAAAAE=">
    <pickle>
      <tuple>
        <tuple>
          <string>Products.PythonScripts.PythonScript</string>
          <string>PythonScript</string>
        </tuple>
        <none/>
      </tuple>
    </pickle>
    <pickle>
      <dictionary>
        <item>
            <key> <string>Python_magic</string> </key>
            <value> <string encoding="base64">O/INCg==</string> </value>
        </item>
        <item>
            <key> <string>Script_magic</string> </key>
            <value> <int>3</int> </value>
        </item>
        <item>
            <key> <string>__ac_local_roles__</string> </key>
            <value>
              <none/>
            </value>
        </item>
        <item>
            <key> <string>_bind_names</string> </key>
            <value>
              <object>
                <klass>
                  <global name="NameAssignments" module="Shared.DC.Scripts.Bindings"/>
                </klass>
                <tuple/>
                <state>
                  <dictionary>
                    <item>
                        <key> <string>_asgns</string> </key>
                        <value>
                          <dictionary>
                            <item>
                                <key> <string>name_container</string> </key>
                                <value> <string>container</string> </value>
                            </item>
                            <item>
                                <key> <string>name_context</string> </key>
                                <value> <string>context</string> </value>
                            </item>
                            <item>
                                <key> <string>name_m_self</string> </key>
                                <value> <string>script</string> </value>
                            </item>
                            <item>
                                <key> <string>name_subpath</string> </key>
                                <value> <string>traverse_subpath</string> </value>
                            </item>
                          </dictionary>
                        </value>
                    </item>
                  </dictionary>
                </state>
              </object>
            </value>
        </item>
        <item>
            <key> <string>_body</string> </key>
            <value> <string>assigned_role_mapping = {}\n
\n
# Parse each role information\n
for role_id, role_information_list in role_mapping.items():\n
  for role_information in role_information_list:\n
    if not assigned_role_mapping.has_key(role_id):\n
      assigned_role_mapping[role_id] = []\n
\n
    base_category = role_information[\'base_category\']\n
    category = list(role_information[\'category\']) # turn this into a list so that we can append more categories\n
\n
    site = None\n
    group = None\n
    function = None\n
\n
    for cat_item in category:\n
      # Parse each category and extract site, group, function\n
      cat_list = cat_item.split(\'/\')\n
      if cat_list[0] == \'site\':\n
        site = \'/\'.join(cat_list[1:])\n
      elif cat_list[0] == \'group\':\n
        group = \'/\'.join(cat_list[1:])\n
      elif cat_list[0] == \'function\':\n
        function = \'/\'.join(cat_list[1:])\n
\n
    # Rebuild the mapping_item - None means that Baobab_assignLocalRole will\n
    # get it from the user assignments. No value means we should not care\n
    mapping_item = {}\n
    if site is not None or \'site\' in base_category:\n
      mapping_item[\'site\'] = site\n
    if group is not None or \'group\' in base_category:\n
      mapping_item[\'group\'] = group\n
    if function is not None or \'function\' in base_category:\n
      mapping_item[\'function\'] = function\n
\n
    assigned_role_mapping[role_id].append(mapping_item)\n
    \n
context.setDescription(str(assigned_role_mapping))\n
\n
context.Baobab_assignLocalRole(**assigned_role_mapping)\n
\n
#raise \'KHADIM\', repr(context.Baobab_assignLocalRole(**assigned_role_mapping))\n
</string> </value>
        </item>
        <item>
            <key> <string>_code</string> </key>
            <value> <string encoding="base64">YwAAAAAAAAAAAQAAAEAAAABzDQAAAGQBAIQAAFoAAGQAAFMoAgAAAE5jAQAAABYAAAAYAAAAQwAA
AHNzAgAAaAAAfQEAeDcCdAEAdAIAfAAAZAEAgwIAgwAAgwEARF0dAnQBAAKDAQBcAgB9BAB9BQB4
BwJ0AQB8BQCDAQBEXfkBfQYAdAIAfAEAZAIAgwIAfAQAgwEADG8UAAFnAAB0BwB8AQCDAQB8BAA8
bgEAAXQIAHwGAGQDAIMCAH0JAHQKAHQIAHwGAGQEAIMCAIMBAH0LAHQMAH0NAHQMAH0OAHQMAH0P
AHjjAHQBAHwLAIMBAERd1QB9EAB0AgB8EABkBQCDAgBkBgCDAQB9EQB0CAB8EQBkBwCDAgBkCABq
AgBvKAABdAIAZAYAZAkAgwIAdAgAfBEAZAoAZAAAhQIAgwIAgwEAfQ0AcbMAAXQIAHwRAGQHAIMC
AGQLAGoCAG8oAAF0AgBkBgBkCQCDAgB0CAB8EQBkCgBkAACFAgCDAgCDAQB9DgBxswABdAgAfBEA
ZAcAgwIAZAwAagIAbygAAXQCAGQGAGQJAIMCAHQIAHwRAGQKAGQAAIUCAIMCAIMBAH0PAHGzAAFx
swBXaAAAfRIAfA0AdAwAagkAcAoAAWQIAHwJAGoGAG8UAAF8DQB0BwB8EgCDAQBkCAA8bgEAAXwO
AHQMAGoJAHAKAAFkCwB8CQBqBgBvFAABfA4AdAcAfBIAgwEAZAsAPG4BAAF8DwB0DABqCQBwCgAB
ZAwAfAkAagYAbxQAAXwPAHQHAHwSAIMBAGQMADxuAQABdAIAdAgAfAEAfAQAgwIAZA0AgwIAfBIA
gwEAAXE/AFdxHwBXdAIAdBMAZA4AgwIAdBQAfAEAgwEAgwEAAXQVAHQCAHQTAGQPAIMCAHwBAI0B
AAFkAABTKBAAAABOcwUAAABpdGVtc3MHAAAAaGFzX2tleXMNAAAAYmFzZV9jYXRlZ29yeXMIAAAA
Y2F0ZWdvcnlzBQAAAHNwbGl0cwEAAAAvaQAAAABzBAAAAHNpdGVzBAAAAGpvaW5pAQAAAHMFAAAA
Z3JvdXBzCAAAAGZ1bmN0aW9ucwYAAABhcHBlbmRzDgAAAHNldERlc2NyaXB0aW9ucxYAAABCYW9i
YWJfYXNzaWduTG9jYWxSb2xlKBYAAABzFQAAAGFzc2lnbmVkX3JvbGVfbWFwcGluZ3MJAAAAX2dl
dGl0ZXJfcwkAAABfZ2V0YXR0cl9zDAAAAHJvbGVfbWFwcGluZ3MHAAAAcm9sZV9pZHMVAAAAcm9s
ZV9pbmZvcm1hdGlvbl9saXN0cxAAAAByb2xlX2luZm9ybWF0aW9ucwcAAABfd3JpdGVfcwkAAABf
Z2V0aXRlbV9zDQAAAGJhc2VfY2F0ZWdvcnlzBAAAAGxpc3RzCAAAAGNhdGVnb3J5cwQAAABOb25l
cwQAAABzaXRlcwUAAABncm91cHMIAAAAZnVuY3Rpb25zCAAAAGNhdF9pdGVtcwgAAABjYXRfbGlz
dHMMAAAAbWFwcGluZ19pdGVtcwcAAABjb250ZXh0cwMAAABzdHJzBwAAAF9hcHBseV8oFgAAAHMM
AAAAcm9sZV9tYXBwaW5ncxUAAABhc3NpZ25lZF9yb2xlX21hcHBpbmdzCQAAAF9nZXRpdGVyX3MJ
AAAAX2dldGF0dHJfcwcAAAByb2xlX2lkcxUAAAByb2xlX2luZm9ybWF0aW9uX2xpc3RzEAAAAHJv
bGVfaW5mb3JtYXRpb25zBwAAAF93cml0ZV9zCQAAAF9nZXRpdGVtX3MNAAAAYmFzZV9jYXRlZ29y
eXMEAAAAbGlzdHMIAAAAY2F0ZWdvcnlzBAAAAE5vbmVzBAAAAHNpdGVzBQAAAGdyb3VwcwgAAABm
dW5jdGlvbnMIAAAAY2F0X2l0ZW1zCAAAAGNhdF9saXN0cwwAAABtYXBwaW5nX2l0ZW1zBwAAAGNv
bnRleHRzAwAAAHN0cnMHAAAAX2FwcGx5XygAAAAAKAAAAABzDwAAAFNjcmlwdCAoUHl0aG9uKXMd
AAAARVJQNVR5cGVfaW5pdExvY2FsUm9sZU1hcHBpbmcBAAAAczwAAAAGAxkAEwENAAYBFwEUAg8B
FQIGAQYBBgINAAYCFQEWASgBFgEoARYBLAQGARoBFAEaARQBGgEaAiECHAIoAQAAAHMdAAAARVJQ
NVR5cGVfaW5pdExvY2FsUm9sZU1hcHBpbmcoAQAAAHMdAAAARVJQNVR5cGVfaW5pdExvY2FsUm9s
ZU1hcHBpbmcoAAAAACgAAAAAcw8AAABTY3JpcHQgKFB5dGhvbilzCAAAADxtb2R1bGU+AQAAAHMA
AAAA</string> </value>
        </item>
        <item>
            <key> <string>_filepath</string> </key>
            <value> <string>Script (Python):/baobab/portal_skins/erp5_banking_core/ERP5Type_initLocalRoleMapping_DEPRECATED</string> </value>
        </item>
        <item>
            <key> <string>_params</string> </key>
            <value> <string>role_mapping</string> </value>
        </item>
        <item>
            <key> <string>_proxy_roles</string> </key>
            <value>
              <tuple>
                <string>Manager</string>
                <string>Owner</string>
              </tuple>
            </value>
        </item>
        <item>
            <key> <string>errors</string> </key>
            <value>
              <tuple/>
            </value>
        </item>
        <item>
            <key> <string>func_code</string> </key>
            <value>
              <object>
                <klass>
                  <global name="FuncCode" module="Shared.DC.Scripts.Signature"/>
                </klass>
                <tuple/>
                <state>
                  <dictionary>
                    <item>
                        <key> <string>co_argcount</string> </key>
                        <value> <int>1</int> </value>
                    </item>
                    <item>
                        <key> <string>co_varnames</string> </key>
                        <value>
                          <tuple>
                            <string>role_mapping</string>
                            <string>assigned_role_mapping</string>
                            <string>_getiter_</string>
                            <string>_getattr_</string>
                            <string>role_id</string>
                            <string>role_information_list</string>
                            <string>role_information</string>
                            <string>_write_</string>
                            <string>_getitem_</string>
                            <string>base_category</string>
                            <string>list</string>
                            <string>category</string>
                            <string>None</string>
                            <string>site</string>
                            <string>group</string>
                            <string>function</string>
                            <string>cat_item</string>
                            <string>cat_list</string>
                            <string>mapping_item</string>
                            <string>context</string>
                            <string>str</string>
                            <string>_apply_</string>
                          </tuple>
                        </value>
                    </item>
                  </dictionary>
                </state>
              </object>
            </value>
        </item>
        <item>
            <key> <string>func_defaults</string> </key>
            <value>
              <none/>
            </value>
        </item>
        <item>
            <key> <string>id</string> </key>
            <value> <string>ERP5Type_initLocalRoleMapping_DEPRECATED</string> </value>
        </item>
        <item>
            <key> <string>warnings</string> </key>
            <value>
              <tuple/>
            </value>
        </item>
      </dictionary>
    </pickle>
  </record>
</ZopeData>
