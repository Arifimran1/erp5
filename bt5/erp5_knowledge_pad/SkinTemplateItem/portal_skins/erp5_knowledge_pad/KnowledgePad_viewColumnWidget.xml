<?xml version="1.0"?>
<ZopeData>
  <record id="1" aka="AAAAAAAAAAE=">
    <pickle>
      <tuple>
        <global name="ZopePageTemplate" module="Products.PageTemplates.ZopePageTemplate"/>
        <tuple/>
      </tuple>
    </pickle>
    <pickle>
      <dictionary>
        <item>
            <key> <string>_bind_names</string> </key>
            <value>
              <object>
                <klass>
                  <global name="NameAssignments" module="Shared.DC.Scripts.Bindings"/>
                </klass>
                <tuple/>
                <state>
                  <dictionary>
                    <item>
                        <key> <string>_asgns</string> </key>
                        <value>
                          <dictionary>
                            <item>
                                <key> <string>name_subpath</string> </key>
                                <value> <string>traverse_subpath</string> </value>
                            </item>
                          </dictionary>
                        </value>
                    </item>
                  </dictionary>
                </state>
              </object>
            </value>
        </item>
        <item>
            <key> <string>_text</string> </key>
            <value> <string encoding="cdata"><![CDATA[

<tal:block \n
     tal:repeat="box_id python: options[\'section_layout\']"\n
     tal:define="real_context python: options.get(\'real_context\', None);\n
                 cancel_url python: options.get(\'cancel_url\', None)">\n
  <tal:block \n
        tal:condition="python: getattr(here, box_id, None) is not None"\n
        tal:define="box python: getattr(here, box_id);\n
                    view_form_dom_id python: \'visual_%s\' %box_id;\n
                    edit_form_dom_id python: \'edit_form_%s\' %box_id;\n
                    gadget python: box.getSpecialiseValue();\n
                    dummy python: request.set(\'is_gadget_mode\', \'1\');\n
                    dummy python: request.set(\'box_relative_url\', box.getRelativeUrl());\n
                    visibility_css_dict python: {\'visible\': \'block\',\n
                                                 \'invisible\': \'none\'};\n
                    isAnon python: here.portal_membership.isAnonymousUser();\n
                    edit_form_id python: getattr(gadget, \'edit_form_id\', None);\n
                    view_form_id python: getattr(gadget, \'view_form_id\', None);\n
                    render_type python: getattr(gadget, \'render_type\', None);\n
                    is_asynchronous_gadget python: render_type == \'asynchronous\';\n
                    current_web_section python: context.REQUEST.get(\'current_web_section\',\n
                                                                    here);\n
                    current_web_section python:  \n
                       test(current_web_section.getPortalType()==\'Web Site\',\n
                                                     real_context, current_web_section);\n
                    current_web_section python:  \n
                       test(real_context.getPortalType() in (\'ERP5 Site\', \'Web Site\',),\n
                                                     real_context, current_web_section); \n
                    isKnowledgePadTemplateUsed python:\n
                       request.get(\'is_knowledge_pad_template_used\', 0);">\n
\n
    <div class="block" \n
      tal:condition="python: gadget is not None">\n
\n
      <h3 class="handle">\n
        <span class="handle">\n
        <tal:block tal:condition="not: isAnon">\n
          <a class="clickable-block block-remove" \n
             i18n:translate="" \n
             i18n:domain="ui"\n
             i18n:attributes="title" \n
             title="Remove"></a>\n
          <a class="clickable-block block-edit-form"\n
             tal:condition="python: edit_form_id is not None"\n
             i18n:translate="" \n
             i18n:domain="ui"\n
             i18n:attributes="title" \n
             title="Edit"></a>\n
          <a class="clickable-block block-minimize"\n
             i18n:translate="" \n
             i18n:domain="ui"\n
             i18n:attributes="title" \n
             title="Minimize"></a>\n
        </tal:block>\n
        <span class="gadget_title" \n
              tal:content="python: here.Base_translateString(gadget.getTitle())"/>\n
        </span>\n
      </h3>\n
\n
        <div class="minimize_wrapper"\n
             tal:attributes="style python: \'display: %s\'\n
                         %visibility_css_dict.get(box.getValidationState(), \'block\')">\n
\n
          <!-- Edit form -->\n
          <div class="edit-form" \n
               tal:condition="python: not isAnon and edit_form_id is not None and not isKnowledgePadTemplateUsed"\n
               tal:attributes="id edit_form_dom_id"\n
               style="display: none;">\n
\n
            <form action="KnowledgeBox_baseEdit"\n
                  tal:condition="not: is_asynchronous_gadget"\n
                  tal:define="box_relative_url python: box.getRelativeUrl();">\n
              <div>\n
                <span tal:replace="structure python: getattr(box, edit_form_id)()"/>\n
                <input type="hidden" \n
                       name="box_relative_url" \n
                       tal:attributes="value box_relative_url"/>\n
                <input type="hidden" \n
                       name="cancel_url" \n
                       tal:attributes="value cancel_url;\n
                         name python: \'%s_cancel_url\' \n
                                       %box_relative_url.replace(\'/\', \'_\')"/> \n
                <button type="submit"\n
                       i18n:translate="" \n
                       i18n:domain="ui" \n
                       name="KnowledgeBox_baseEdit:method">Save</button>\n
              </div>\n
            </form>\n
\n
            <tal:block tal:condition="is_asynchronous_gadget">\n
              <span tal:replace="structure python: getattr(box, edit_form_id)()"/>\n
              <button type="button" \n
                i18n:translate="" \n
                i18n:domain="ui"\n
                tal:attributes="onclick python: \n
                               \'sendPreferencesToServer(\\\'%s\\\', \\\'%s\\\', \\\'%s\\\', \\\'%s\\\')\'\n
                                                         %(edit_form_dom_id, \n
                                                           view_form_id, \n
                                                           box.getRelativeUrl(), \n
                                                           view_form_dom_id)">\n
               Save</button>\n
            </tal:block>\n
\n
          </div>\n
  \n
          <!-- Content render -->\n
          <div class="content" \n
              tal:condition="not: is_asynchronous_gadget">\n
\n
            <div tal:attributes="id view_form_dom_id"\n
                 class="box_inner_content" \n
                 tal:content="structure python: getattr(real_context,\n
                                                        view_form_id)(box=box)"/>\n
          </div>\n
  \n
          <div class="content"\n
              tal:condition="is_asynchronous_gadget">\n
            <div tal:attributes="id view_form_dom_id" \n
                 class="box_inner_content"\n
                 i18n:translate="" \n
                 i18n:domain="ui">Loading ...</div>\n
            <script type="text/javascript"\n
              tal:content="structure python:\n
                            here.KnowledgePad_generateAjaxCall(\'%s/%s\' %(current_web_section.absolute_url(),view_form_id),\n
                                                               box,\n
                                                               view_form_dom_id,\n
                                                               ignore_security_check=1)">\n
            </script>\n
\n
          </div>\n
        </div>\n
\n
\n
  </div>\n
  </tal:block>\n
</tal:block>\n


]]></string> </value>
        </item>
        <item>
            <key> <string>content_type</string> </key>
            <value> <string>text/html</string> </value>
        </item>
        <item>
            <key> <string>expand</string> </key>
            <value> <int>0</int> </value>
        </item>
        <item>
            <key> <string>id</string> </key>
            <value> <string>KnowledgePad_viewColumnWidget</string> </value>
        </item>
        <item>
            <key> <string>title</string> </key>
            <value> <string>Render boxes for a column</string> </value>
        </item>
      </dictionary>
    </pickle>
  </record>
</ZopeData>
