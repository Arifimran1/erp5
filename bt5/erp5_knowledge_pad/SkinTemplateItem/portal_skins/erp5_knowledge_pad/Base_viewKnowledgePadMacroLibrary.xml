<?xml version="1.0"?>
<ZopeData>
  <record id="1" aka="AAAAAAAAAAE=">
    <pickle>
      <global name="ZopePageTemplate" module="Products.PageTemplates.ZopePageTemplate"/>
    </pickle>
    <pickle>
      <dictionary>
        <item>
            <key> <string>_bind_names</string> </key>
            <value>
              <object>
                <klass>
                  <global name="NameAssignments" module="Shared.DC.Scripts.Bindings"/>
                </klass>
                <tuple/>
                <state>
                  <dictionary>
                    <item>
                        <key> <string>_asgns</string> </key>
                        <value>
                          <dictionary>
                            <item>
                                <key> <string>name_subpath</string> </key>
                                <value> <string>traverse_subpath</string> </value>
                            </item>
                          </dictionary>
                        </value>
                    </item>
                  </dictionary>
                </state>
              </object>
            </value>
        </item>
        <item>
            <key> <string>_text</string> </key>
            <value> <unicode encoding="cdata"><![CDATA[

<tal:block metal:define-macro="disable_server_integration">\n
\n
  <tal:block tal:condition="isKnowledgePadTemplateUsed">\n
    <script type="text/javascript" \n
            tal:content="structure python: here.Base_generateOverrideJavaScript(\n
                            mode = mode,\n
                            default_pad_group = default_pad_group,\n
                            cancel_url = cancel_url)">\n
    </script>\n
  </tal:block>\n
\n
</tal:block>\n
\n
<tal:block metal:define-macro="knowledge_pad_security_check">\n
\n
  <div tal:condition="python: not ( isUserAllowedToCreateKnowledgePads or isAnon or isAnonymousKnowledgePadUsed)">\n
    <div class="wait_block">\n
      <p i18n:translate="" i18n:domain="ui"> \n
        You are not allowed to use knowledge pad system due to security restrictions.\n
      </p>\n
    </div>\n
  </div>\n
\n
</tal:block> \n
\n
<tal:block metal:define-macro="add_new_gadget">\n
  <a href="Base_viewGadgetListDialog"\n
     tal:condition="not: isKnowledgePadTemplateUsed"\n
     tal:attributes="href python:\n
     \'Base_viewGadgetListDialog?reset=1&cancel_url=%s&active_pad_relative_url=%s&mode=%s\'\n
      %(cancel_url, \n
        active_knowledge_pad.getRelativeUrl(), mode);"\n
     title="Add gadgets"\n
     i18n:domain="ui"\n
     i18n:attributes="title"\n
     id="add-gadgets"><span i18n:translate="">Add gadgets</span></a>\n
</tal:block>\n
\n
<tal:block metal:define-macro="stick">\n
  <tal:block\n
    tal:condition="not: isKnowledgePadTemplateUsed"\n
    tal:define="is_customized_pad python:\n
          active_knowledge_pad.getPublicationSectionValue()==context and\n
          active_knowledge_pad.getGroup()==default_pad_group">\n
\n
    <a tal:condition="not: is_customized_pad"\n
       tal:attributes="href python:\n
       \'WebSection_stickKnowledgePad?knowledge_pad_url=%s&cancel_url=%s\'\n
       %(active_knowledge_pad.getRelativeUrl(), cancel_url)"\n
       i18n:translate="" \n
       i18n:domain="ui"\n
       id="stick-gadgets"><span>Stick it</span></a>\n
\n
    <a tal:condition="is_customized_pad"\n
       tal:attributes="href python:\n
       \'WebSection_unStickKnowledgePad?knowledge_pad_url=%s&cancel_url=%s\'\n
       %(active_knowledge_pad.getRelativeUrl(), cancel_url)"\n
       i18n:translate="" \n
       i18n:domain="ui"\n
       id="unstick-gadgets"><span>Unstick it</span></a>\n
  </tal:block>\n
</tal:block>\n
\n
\n
\n
<tal:block metal:define-macro="hidden_dialogs">\n
\n
  <div id="add_new_tab_dialog"\n
      class="toggable_dialog">\n
    <h3 i18n:translate="" i18n:domain="ui"> Add new tab </h3>\n
      <span i18n:translate="" i18n:domain="ui">Tab name</span>: \n
      <input type="text" \n
             value="" \n
             name="pad_title" \n
             id="new_pad_title"\n
             tal:attributes="onkeypress string:addPadOnServerOnEnter(event, \'ERP5Site_addNewKnowledgePad\', \'${mode}\', \'view\')"/>\n
      <br/>\n
      <br/>\n
      <button type="button"\n
              onclick="toggleElementById(\'add_new_tab_dialog\');"\n
              i18n:translate="" \n
              i18n:domain="ui">Cancel</button>\n
      <button type="button"\n
              tal:attributes="onclick string:addPadOnServer(\'ERP5Site_addNewKnowledgePad\', \'${mode}\', \'view\')" \n
              i18n:translate="" \n
              i18n:domain="ui"\n
              id="add_new_tab_dialog_add_button">Add</button>\n
  </div>\n
\n
  <div id="rename_tab_dialog" \n
       tal:condition="active_knowledge_pad"\n
       class="toggable_dialog"\n
       tal:define="active_knowledge_pad_relative_url active_knowledge_pad/getRelativeUrl">\n
    <h3 i18n:translate="" i18n:domain="ui"> Rename tab </h3>\n
      <span i18n:translate="" i18n:domain="ui">Tab name</span>:\n
      <input type="text"\n
             id="new_knowledge_pad_title"\n
             name="knowledge_pad_title"\n
             tal:attributes="value active_knowledge_pad/getTitle;\n
                             onkeypress string:return renameKnowledgePadToServerOnEnter(event,\n
                                                        \'rename_tab_dialog\',\'active_knowledge_pad_title\',\n
                                                         \'new_knowledge_pad_title\',\'${active_knowledge_pad_relative_url}\');"/>\n
      <br/>\n
      <br/>\n
      <button type="button"\n
              i18n:translate="" \n
              i18n:domain="ui"\n
              onclick="toggleElementById(\'rename_tab_dialog\');">Cancel</button>\n
      <button type="button"\n
              i18n:translate="" \n
              i18n:domain="ui"\n
              id="rename_tab_dialog_rename_button"\n
              tal:attributes="onclick string:renameKnowledgePadToServer(\n
                                               \'rename_tab_dialog\',\'active_knowledge_pad_title\',\n
                                               \'new_knowledge_pad_title\',\'${active_knowledge_pad_relative_url}\');">\n
        Rename \n
      </button>\n
  </div>\n
</tal:block>\n
\n
\n
<tal:block metal:define-macro="navigation"\n
           tal:define="is_tabs_visible \n
                            python: int(here.REQUEST.get(\'is_tabs_visible\', 1));">\n
\n
   <table id="navigation_table">\n
      <tr>\n
        <td id="tab-switcher-container">\n
          <div class="tab"\n
              id="tabs_switcher"\n
              tal:attributes="class python: test(is_tabs_visible,\n
                                                 \'border_bottom1px\',\n
                                                  \'border_bottom0px\');">\n
            <span i18n:translate="" i18n:domain="ui" id="tab_switcher_hidden"\n
                  tal:attributes="style python: test(is_tabs_visible, \'display:none\', None)">Show tabs</span>\n
            <span i18n:translate="" i18n:domain="ui" id="tab_switcher_visible"\n
                  tal:attributes="style python: test(is_tabs_visible, None, \'display:none\')">Hide tabs</span>\n
          </div>\n
        </td>\n
        <td id="tab-list-container">\n
          <div id="tabs"\n
              tal:attributes="style python: \n
                                    \'display: %s\' %test(is_tabs_visible, \'block\', \'none\')">\n
              <ul>\n
                <tal:block tal:repeat="knowledge_pad knowledge_pads">\n
\n
                  <tal:block  \n
                    tal:define="knowledge_pad_relative_url knowledge_pad/getRelativeUrl;\n
                                active_knowledge_pad_relative_url active_knowledge_pad/getRelativeUrl;\n
                                is_active python: knowledge_pad_relative_url==active_knowledge_pad_relative_url"> \n
\n
                    <li tal:condition="is_active"\n
                        class="tab tab_selected">\n
                        <span id="active_knowledge_pad_title" \n
                              tal:content="knowledge_pad/title"/>\n
\n
                        <span title="Settings"\n
                              i18n:attributes="title"\n
                              i18n:domain="ui"\n
                              class="clickable_image rename_tab_dialog_image"\n
                              onclick="toggleElementById(\'rename_tab_dialog\');"></span>\n
\n
                        <span title="Remove"\n
                              i18n:attributes="title"\n
                              i18n:domain="ui"\n
                              class="clickable_image remove_tab_dialog_image"\n
                              tal:attributes="onclick string: removeKnowledgePadFromServer(\n
                                                                \'${active_knowledge_pad_relative_url}\', \'${mode}\')"/>\n
                    </li>\n
\n
                    <li tal:condition="not: is_active"\n
                        class="tab">\n
                     <a tal:attributes="href python:\n
                                          \'ERP5Site_toggleActiveKnowledgePad?knowledge_pad_url=%s&mode=%s\'\n
                                          %(knowledge_pad.getRelativeUrl(), mode)">\n
                             <span tal:content="knowledge_pad/getTitle"/>\n
                      </a>\n
                       <!-- XXX: instant switch-->\n
<!--                       <span tal:attributes="onclick string:loadPadFromServer(\'${knowledge_pad_relative_url}\', \'page_wrapper\', \'${mode}\')" \n
                             tal:content="knowledge_pad/getTitle"/>-->\n
\n
                    </li>\n
                  </tal:block>\n
                </tal:block>\n
                <li class="tab"\n
                    tal:condition="not: isKnowledgePadTemplateUsed"\n
                    onclick="showAddNewPadPopup(\'add_new_tab_dialog\', \'new_pad_title\');"\n
                    i18n:translate="title" i18n:domain="ui"\n
                    title="Add new tab"\n
                    id="add_new_tab_dialog_link">Add tab</li>\n
                <li class="tab"\n
                    tal:condition="python: isKnowledgePadTemplateUsed and isUserAllowedToCreateKnowledgePads"\n
                    onclick="showCreateDefaultKnowledgePadWarningMessage();"\n
                    i18n:translate="title" i18n:domain="ui"\n
                    title="Create your own tab"\n
                    id="create_own_pad_dialog_link"></li>\n
              </ul>\n
            </div>\n
          </td>\n
    \n
          <td id="add-new-gadget-container">\n
            <div id="add_new_gadget_link"\n
                 tal:attributes="class python: test(is_tabs_visible,\n
                                                    \'border_bottom1px\',\n
                                                    \'border_bottom0px\');">\n
              <span    metal:use-macro="container/Base_viewKnowledgePadMacroLibrary/macros/add_new_gadget"> Add Gadgets</span>\n
            </div>\n
          </td>\n
\n
        </tr>\n
      </table>\n
\n
</tal:block>\n
\n
<tal:block metal:define-macro="add_new_gadget_message">\n
  <div tal:condition="is_tab_empty">\n
    <h3 i18n:translate="" \n
        i18n:domain="ui"> \n
      Your tab is empty.\n
    </h3>\n
    <h4 i18n:translate="" \n
        i18n:domain="ui"> \n
        Please  use link (<b>Add gadgets</b>) to prepare it yourself.\n
    </h4>\n
  </div>\n
</tal:block>\n
\n
\n
<tal:block metal:define-macro="create_default_pad">\n
  <!-- Create (asynch) default pad. -->\n
  <div tal:condition="python: not waitForActivitiesOnServer and \n
                              isUserAllowedToCreateKnowledgePads and\n
                              createDefaultPadForUser">\n
    <div class="wait_block">\n
      <h2 i18n:translate="" i18n:domain="ui"> \n
        Please wait until your tab is being prepared.\n
      </h2>\n
      <p i18n:translate="" i18n:domain="ui"> You\'ll be automatically redirected.</p>\n
      <script type="text/javascript"\n
              tal:content="string: createDefaultPadOnServer(5000, \'ERP5Site_createDefaultKnowledgePadListForUser\',\n
                                                            \'${default_pad_group}\', \'view\', \'${mode}\');"/>\n
      </div>\n
  </div>\n
</tal:block>\n
\n
\n
<tal:block metal:define-macro="create_default_pad_started">\n
\n
  <!-- Show message that default pad is being prepared. -->\n
  <div tal:condition="python: waitForActivitiesOnServer and isUserAllowedToCreateKnowledgePads">\n
    <div class="wait_block">\n
      <h2 i18n:translate="" i18n:domain="ui"> \n
        Please wait until your home is being updated.</h2>\n
      <p i18n:translate="" i18n:domain="ui"> You\'ll be automatically redirected.</p>\n
      <script type="text/javascript" \n
              tal:content="string: checkForActivitiesOnServer(5000, \'view\', \'${mode}\', \'${default_pad_group}\');"/>\n
      </div>\n
  </div>\n
</tal:block>\n


]]></unicode> </value>
        </item>
        <item>
            <key> <string>content_type</string> </key>
            <value> <string>text/html</string> </value>
        </item>
        <item>
            <key> <string>expand</string> </key>
            <value> <int>0</int> </value>
        </item>
        <item>
            <key> <string>id</string> </key>
            <value> <string>Base_viewKnowledgePadMacroLibrary</string> </value>
        </item>
        <item>
            <key> <string>output_encoding</string> </key>
            <value> <string>utf-8</string> </value>
        </item>
        <item>
            <key> <string>title</string> </key>
            <value> <unicode></unicode> </value>
        </item>
      </dictionary>
    </pickle>
  </record>
</ZopeData>
