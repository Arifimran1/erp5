<?xml version="1.0"?>
<ZopeData>
  <record id="1" aka="AAAAAAAAAAE=">
    <pickle>
      <tuple>
        <tuple>
          <string>Products.PythonScripts.PythonScript</string>
          <string>PythonScript</string>
        </tuple>
        <none/>
      </tuple>
    </pickle>
    <pickle>
      <dictionary>
        <item>
            <key> <string>Python_magic</string> </key>
            <value> <string encoding="base64">O/INCg==</string> </value>
        </item>
        <item>
            <key> <string>Script_magic</string> </key>
            <value> <int>3</int> </value>
        </item>
        <item>
            <key> <string>__ac_local_roles__</string> </key>
            <value>
              <none/>
            </value>
        </item>
        <item>
            <key> <string>_bind_names</string> </key>
            <value>
              <object>
                <klass>
                  <global name="NameAssignments" module="Shared.DC.Scripts.Bindings"/>
                </klass>
                <tuple/>
                <state>
                  <dictionary>
                    <item>
                        <key> <string>_asgns</string> </key>
                        <value>
                          <dictionary>
                            <item>
                                <key> <string>name_container</string> </key>
                                <value> <string>container</string> </value>
                            </item>
                            <item>
                                <key> <string>name_context</string> </key>
                                <value> <string>context</string> </value>
                            </item>
                            <item>
                                <key> <string>name_m_self</string> </key>
                                <value> <string>script</string> </value>
                            </item>
                            <item>
                                <key> <string>name_subpath</string> </key>
                                <value> <string>traverse_subpath</string> </value>
                            </item>
                          </dictionary>
                        </value>
                    </item>
                  </dictionary>
                </state>
              </object>
            </value>
        </item>
        <item>
            <key> <string>_body</string> </key>
            <value> <string encoding="cdata"><![CDATA[

name_designation_match = {\n
  \'stop\': \'Unimmobilisation\',\n
  \'start\': \'Immobilisation\',\n
  \'annuity\': \'Annuity\',\n
  \'correction\': \'Correction\' }\n
\n
if transaction_line is None:\n
  transaction_line = context\n
if transaction_line.getPortalType() != \'Amortisation Transaction Line\':\n
  return []\n
\n
\n
returned_dict = {}\n
delivery_related_list = transaction_line.getDeliveryRelatedValueList()\n
\n
for simulation_movement in delivery_related_list:\n
  applied_rule = simulation_movement.getParent()\n
  item_title = applied_rule.getCausalityTitle()\n
\n
  if returned_dict.get(item_title, None) is None:\n
    returned_dict[item_title] = []\n
  detail_list = returned_dict[item_title]\n
\n
\n
  value = simulation_movement.getQuantity()\n
  debit, credit = 0, 0\n
  if value < 0:\n
    debit = - value\n
  else:\n
    credit = value\n
  debit = \'%0.2f\' % debit\n
  credit = \'%0.2f\' % credit\n
\n
  operation = simulation_movement.getId().split(\'_\')[0]\n
  designation = name_designation_match.get(operation, \'Unknown\')\n
\n
  detail_list.append( { \'item\':item_title, \'designation\':designation, \'debit\':debit, \'credit\':credit } )\n
  returned_dict[item_title] = detail_list\n
\n
\n
returned_value = []\n
for item, data in returned_dict.items():\n
  for detail in data:\n
    returned_value.append(detail)\n
\n
return returned_value\n


]]></string> </value>
        </item>
        <item>
            <key> <string>_code</string> </key>
            <value> <string encoding="base64">YwAAAAAAAAAAAgAAAEAAAABzEAAAAGUAAGQBAIQBAFoBAGQAAFMoAgAAAE5jAQAAABcAAAAVAAAA
QwAAAHNFAgAAaAAABGQBAGQCAAM8BGQDAGQEAAM8BGQFAGQGAAM8BGQHAGQIAAM8fQEAfAAAdAIA
aggAbwoAAXQDAH0AAG4BAAF0BAB8AABkCQCDAgCDAABkCgBqAwBvCAABZwAAU24BAAFoAAB9BQB0
BAB8AABkCwCDAgCDAAB9BgB4YAF0BwB8BgCDAQBEXVIBfQgAdAQAfAgAZAwAgwIAgwAAfQkAdAQA
fAkAZA0AgwIAgwAAfQoAdAQAfAUAZA4AgwIAfAoAdAIAgwIAdAIAaggAbxQAAWcAAHQLAHwFAIMB
AHwKADxuAQABdAwAfAUAfAoAgwIAfQ0AdAQAfAgAZA8AgwIAgwAAfQ4AZBAAZBAAZgIAdAcAAoMB
AFwCAH0PAH0QAHwOAGQQAGoAAG8LAAF8DgALfQ8AbgcAAXwOAH0QAGQRAHwPABZ9DwBkEQB8EAAW
fRAAdAwAdAQAdAQAfAgAZBIAgwIAgwAAZBMAgwIAZBQAgwEAZBAAgwIAfREAdAQAfAEAZA4AgwIA
fBEAZBUAgwIAfRIAdAQAfA0AZBYAgwIAaAAABGQXAHwKAAM8BGQYAHwSAAM8BGQZAHwPAAM8BGQa
AHwQAAM8gwEAAXwNAHQLAHwFAIMBAHwKADxxhwBXZwAAfRMAeFcAdAcAdAQAfAUAZBsAgwIAgwAA
gwEARF09AHQHAAKDAQBcAgB9FAB9FQB4JwB0BwB8FQCDAQBEXRkAfRYAdAQAfBMAZBYAgwIAfBYA
gwEAAXEcAldx/AFXfBMAU2QAAFMoHAAAAE5zBAAAAHN0b3BzEAAAAFVuaW1tb2JpbGlzYXRpb25z
BQAAAHN0YXJ0cw4AAABJbW1vYmlsaXNhdGlvbnMHAAAAYW5udWl0eXMHAAAAQW5udWl0eXMKAAAA
Y29ycmVjdGlvbnMKAAAAQ29ycmVjdGlvbnMNAAAAZ2V0UG9ydGFsVHlwZXMdAAAAQW1vcnRpc2F0
aW9uIFRyYW5zYWN0aW9uIExpbmVzGwAAAGdldERlbGl2ZXJ5UmVsYXRlZFZhbHVlTGlzdHMJAAAA
Z2V0UGFyZW50cxEAAABnZXRDYXVzYWxpdHlUaXRsZXMDAAAAZ2V0cwsAAABnZXRRdWFudGl0eWkA
AAAAcwUAAAAlMC4yZnMFAAAAZ2V0SWRzBQAAAHNwbGl0cwEAAABfcwcAAABVbmtub3ducwYAAABh
cHBlbmRzBAAAAGl0ZW1zCwAAAGRlc2lnbmF0aW9ucwUAAABkZWJpdHMGAAAAY3JlZGl0cwUAAABp
dGVtcygXAAAAcxYAAABuYW1lX2Rlc2lnbmF0aW9uX21hdGNocxAAAAB0cmFuc2FjdGlvbl9saW5l
cwQAAABOb25lcwcAAABjb250ZXh0cwkAAABfZ2V0YXR0cl9zDQAAAHJldHVybmVkX2RpY3RzFQAA
AGRlbGl2ZXJ5X3JlbGF0ZWRfbGlzdHMJAAAAX2dldGl0ZXJfcxMAAABzaW11bGF0aW9uX21vdmVt
ZW50cwwAAABhcHBsaWVkX3J1bGVzCgAAAGl0ZW1fdGl0bGVzBwAAAF93cml0ZV9zCQAAAF9nZXRp
dGVtX3MLAAAAZGV0YWlsX2xpc3RzBQAAAHZhbHVlcwUAAABkZWJpdHMGAAAAY3JlZGl0cwkAAABv
cGVyYXRpb25zCwAAAGRlc2lnbmF0aW9ucw4AAAByZXR1cm5lZF92YWx1ZXMEAAAAaXRlbXMEAAAA
ZGF0YXMGAAAAZGV0YWlsKBcAAABzEAAAAHRyYW5zYWN0aW9uX2xpbmVzFgAAAG5hbWVfZGVzaWdu
YXRpb25fbWF0Y2hzBAAAAE5vbmVzBwAAAGNvbnRleHRzCQAAAF9nZXRhdHRyX3MNAAAAcmV0dXJu
ZWRfZGljdHMVAAAAZGVsaXZlcnlfcmVsYXRlZF9saXN0cwkAAABfZ2V0aXRlcl9zEwAAAHNpbXVs
YXRpb25fbW92ZW1lbnRzDAAAAGFwcGxpZWRfcnVsZXMKAAAAaXRlbV90aXRsZXMHAAAAX3dyaXRl
X3MJAAAAX2dldGl0ZW1fcwsAAABkZXRhaWxfbGlzdHMFAAAAdmFsdWVzBQAAAGRlYml0cwYAAABj
cmVkaXRzCQAAAG9wZXJhdGlvbnMLAAAAZGVzaWduYXRpb25zDgAAAHJldHVybmVkX3ZhbHVlcwQA
AABpdGVtcwQAAABkYXRhcwYAAABkZXRhaWwoAAAAACgAAAAAcw8AAABTY3JpcHQgKFB5dGhvbilz
MAAAAEltbW9iaWxpc2F0aW9uX2dldFRyYW5zYWN0aW9uRGVsaXZlcnlSZWxhdGVkSW5mbwEAAABz
PgAAACoGDQEKARkBCAMGARICDQAGARIBEgIfARQBDwMSARkBDQELAgYBCgEKAioBGwI0ARQDBgEZ
ABMBDQAJARgCKAIAAABzBAAAAE5vbmVzMAAAAEltbW9iaWxpc2F0aW9uX2dldFRyYW5zYWN0aW9u
RGVsaXZlcnlSZWxhdGVkSW5mbygCAAAAcwQAAABOb25lczAAAABJbW1vYmlsaXNhdGlvbl9nZXRU
cmFuc2FjdGlvbkRlbGl2ZXJ5UmVsYXRlZEluZm8oAAAAACgAAAAAcw8AAABTY3JpcHQgKFB5dGhv
bilzCAAAADxtb2R1bGU+AQAAAHMAAAAA</string> </value>
        </item>
        <item>
            <key> <string>_filepath</string> </key>
            <value> <string>Script (Python):/erp5/portal_skins/local_immobilisation/Immobilisation_getTransactionDeliveryRelatedInfo</string> </value>
        </item>
        <item>
            <key> <string>_params</string> </key>
            <value> <string>transaction_line=None</string> </value>
        </item>
        <item>
            <key> <string>errors</string> </key>
            <value>
              <tuple/>
            </value>
        </item>
        <item>
            <key> <string>func_code</string> </key>
            <value>
              <object>
                <klass>
                  <global name="FuncCode" module="Shared.DC.Scripts.Signature"/>
                </klass>
                <tuple/>
                <state>
                  <dictionary>
                    <item>
                        <key> <string>co_argcount</string> </key>
                        <value> <int>1</int> </value>
                    </item>
                    <item>
                        <key> <string>co_varnames</string> </key>
                        <value>
                          <tuple>
                            <string>transaction_line</string>
                            <string>name_designation_match</string>
                            <string>None</string>
                            <string>context</string>
                            <string>_getattr_</string>
                            <string>returned_dict</string>
                            <string>delivery_related_list</string>
                            <string>_getiter_</string>
                            <string>simulation_movement</string>
                            <string>applied_rule</string>
                            <string>item_title</string>
                            <string>_write_</string>
                            <string>_getitem_</string>
                            <string>detail_list</string>
                            <string>value</string>
                            <string>debit</string>
                            <string>credit</string>
                            <string>operation</string>
                            <string>designation</string>
                            <string>returned_value</string>
                            <string>item</string>
                            <string>data</string>
                            <string>detail</string>
                          </tuple>
                        </value>
                    </item>
                  </dictionary>
                </state>
              </object>
            </value>
        </item>
        <item>
            <key> <string>func_defaults</string> </key>
            <value>
              <tuple>
                <none/>
              </tuple>
            </value>
        </item>
        <item>
            <key> <string>id</string> </key>
            <value> <string>Immobilisation_getTransactionDeliveryRelatedInfo</string> </value>
        </item>
        <item>
            <key> <string>warnings</string> </key>
            <value>
              <tuple/>
            </value>
        </item>
      </dictionary>
    </pickle>
  </record>
</ZopeData>
