<?xml version="1.0"?>
<ZopeData>
  <record id="1" aka="AAAAAAAAAAE=">
    <pickle>
      <global name="File" module="OFS.Image"/>
    </pickle>
    <pickle>
      <dictionary>
        <item>
            <key> <string>_Cacheable__manager_id</string> </key>
            <value> <string>http_cache</string> </value>
        </item>
        <item>
            <key> <string>_EtagSupport__etag</string> </key>
            <value> <string>ts99855935.94</string> </value>
        </item>
        <item>
            <key> <string>__name__</string> </key>
            <value> <string>erp5_km.js</string> </value>
        </item>
        <item>
            <key> <string>content_type</string> </key>
            <value> <string>application/javascript</string> </value>
        </item>
        <item>
            <key> <string>data</string> </key>
            <value> <string encoding="cdata"><![CDATA[

/*\n
Copyright (c) 2011-2012 Nexedi SARL and Contributors. All Rights Reserved.\n
\n
This program is Free Software; you can redistribute it and/or\n
modify it under the terms of the GNU General Public License\n
as published by the Free Software Foundation; either version 2\n
of the License, or (at your option) any later version.\n
\n
This program is distributed in the hope that it will be useful,\n
but WITHOUT ANY WARRANTY; without even the implied warranty of\n
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n
GNU General Public License for more details.\n
\n
You should have received a copy of the GNU General Public License\n
along with this program; if not, write to the Free Software\n
Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.\n
*/\n
\n
function toggleSection(section_id, image_id){\n
  /* Browser gadget toggle section */\n
  section_obj = $("#" + section_id);\n
  image_obj = $("#" + image_id);\n
  if(section_obj.is(":hidden")){\n
    section_obj.show();\n
    image_obj.attr("src", "images/tree_open.png");}\n
  else{\n
    section_obj.hide();\n
    image_obj.attr("src", "images/tree_closed.png");}\n
  } \n
\n
function toggleHiddenFormatDialogSelection(){\n
  /* Expand more download formats widget */\n
  $("div.download-document-format-list-menu-hidden").toggle();\n
  $("li.toggle-hidden-format-dialog-selection-link").remove();\n
}\n
\n
function requestPasswordReset(script_name){\n
  $("#reference").attr("value", $("#__ac_name").val()) \n
  // reset __ac_name & __ac_password in case they have been filled by browser\n
  $("#__ac_name").attr("value", "");\n
  $("#__ac_password").attr("value", "");\n
  // Submit request password\n
  main_form = $("#main_form");\n
  main_form.attr("action", script_name);\n
  main_form.submit();\n
};\n
\n
//enable or disable right side search result preview\n
var show_preview=false;\n
var popup_local_dict={};\n
var popup_request_dict={};\n
\n
function togglePreview(dom_id,path){\n
  /* \n
  Enable or disable right preview in search mode listbox style. \n
  */\n
  listbox_container = $("#"+dom_id).parents("div.listbox-container")\n
  if(!$("#listbox-preview").length){\n
    // init only once per listbox\n
    listbox_container.append(\'<div id="listbox-preview"><img src="ajax-loader.gif" title="Loading" alt="Loading" /><p>Loading...</p> </div>\');\n
    show_preview=true;\n
    showPopik(dom_id, path);\n
  }\n
  else{\n
    // we can switch it off\n
    $("#listbox-preview").remove();\n
    show_preview=false;}\n
}\n
\n
function formatPreview(dom_id, path){\n
  /*\n
    Format visually the popup preview.\n
  */\n
  popup = $("#listbox-preview");\n
  dom_object = $("#"+dom_id);\n
  parent_row = dom_object.parents("tr").first()\n
  row_object = dom_object.parents("tr").first();\n
  class_name = row_object.attr("class"); \n
  class_name = class_name.replace("listbox-data-line-","");\n
  class_name = class_name.replace("DataA","");\n
  class_name = class_name.replace("DataB","");\n
  row_index = parseInt(class_name);\n
  //calculate current row offset relative to listbox\'s table.tbody\n
  offset = parent_row.position("tbody").top - $("tr.listbox-data-line-0").position("tbody").top;\n
  popup.css("top", offset + "px");\n
}\n
\n
function requestPopupInfo(dom_id, path){\n
  /*\n
    Get popup infor from server and cache it locally for page\'s lifetime.\n
  */\n
  var popup = $("#listbox-preview");\n
  popup_request_dict[dom_id] = popup_request_dict;\n
  $.ajax({url: path + "/Document_getPopupInfo", \n
          success: function(popup_html){\n
                           formatPreview(dom_id, path);\n
                           popup.html(popup_html);\n
                           popup.show();\n
                           popup_local_dict[dom_id] = popup_html;}});\n
  }\n
  \n
\n
function showPopik(dom_id, path){\n
  /* \n
    Show / Hide popup details window up in search mode. \n
  */\n
  if(!show_preview) return;\n
  popup = $("#listbox-preview");\n
  if($("#hidden_popup_listbox_"+dom_id).length){\n
    // popup info is inline just copy it\n
    formatPreview(dom_id, path);\n
    popup_html = $("#hidden_popup_listbox_"+dom_id).html();\n
    popup.html(popup_html);\n
    popup.show();\n
    return\n
  }\n
  // we must request popup info with another request\n
  popup_html = popup_local_dict[dom_id];\n
  popup_request = popup_request_dict[dom_id];\n
  if (popup_html==undefined&&popup_request==undefined){\n
    // still not cached for page\'s lifetime not any pending requests to server\n
    requestPopupInfo(dom_id, path);\n
  }\n
  else{\n
    // cached for page\'s lifetime\n
    formatPreview(dom_id, path);\n
    popup.html(popup_html);\n
    popup.show();\n
  }\n
}

]]></string> </value>
        </item>
        <item>
            <key> <string>precondition</string> </key>
            <value> <string></string> </value>
        </item>
        <item>
            <key> <string>size</string> </key>
            <value> <int>4458</int> </value>
        </item>
        <item>
            <key> <string>title</string> </key>
            <value> <string></string> </value>
        </item>
      </dictionary>
    </pickle>
  </record>
</ZopeData>
