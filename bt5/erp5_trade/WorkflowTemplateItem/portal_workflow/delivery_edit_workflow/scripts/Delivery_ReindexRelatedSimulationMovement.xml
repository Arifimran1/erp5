<?xml version="1.0"?>
<ZopeData>
  <record id="1" aka="AAAAAAAAAAE=">
    <pickle>
      <tuple>
        <tuple>
          <string>Products.PythonScripts.PythonScript</string>
          <string>PythonScript</string>
        </tuple>
        <none/>
      </tuple>
    </pickle>
    <pickle>
      <dictionary>
        <item>
            <key> <string>Python_magic</string> </key>
            <value> <string encoding="base64">O/INCg==</string> </value>
        </item>
        <item>
            <key> <string>Script_magic</string> </key>
            <value> <int>3</int> </value>
        </item>
        <item>
            <key> <string>__ac_local_roles__</string> </key>
            <value>
              <none/>
            </value>
        </item>
        <item>
            <key> <string>_bind_names</string> </key>
            <value>
              <object>
                <klass>
                  <global name="NameAssignments" module="Shared.DC.Scripts.Bindings"/>
                </klass>
                <tuple/>
                <state>
                  <dictionary>
                    <item>
                        <key> <string>_asgns</string> </key>
                        <value>
                          <dictionary>
                            <item>
                                <key> <string>name_container</string> </key>
                                <value> <string>container</string> </value>
                            </item>
                            <item>
                                <key> <string>name_context</string> </key>
                                <value> <string>context</string> </value>
                            </item>
                            <item>
                                <key> <string>name_m_self</string> </key>
                                <value> <string>script</string> </value>
                            </item>
                            <item>
                                <key> <string>name_subpath</string> </key>
                                <value> <string>traverse_subpath</string> </value>
                            </item>
                          </dictionary>
                        </value>
                    </item>
                  </dictionary>
                </state>
              </object>
            </value>
        </item>
        <item>
            <key> <string>_body</string> </key>
            <value> <string>"""\n
 +-----+    +--------+\n
 |Order|    |Delivery|   \n
 +-----+    +--------+\n
    |      /\n
   [AR]   /          \n
     `--[SM] (1)     \n
          |        \n
        [AR]     \n
           `--[SM] (2)\n
                | \n
                  ...\n
\n
  This script reindex simulation movements in (1), so that delivery builder select movement in (2)\n
with an up to date simulation state.\n
"""\n
\n
delivery = sci[\'object\']\n
LOG = lambda msg:delivery.log("delivery_edit_workflow.Delivery_ReindexRelatedSimulationMovement (%s)\\n" % (delivery.getPath()), msg)\n
LOG = lambda msg:None\n
\n
LOG(\'BEGIN\')\n
\n
for movement in delivery.getMovementList() : \n
  for simulation_movement in movement.getDeliveryRelatedValueList() :\n
    simulation_movement.recursiveReindexObject()\n
    LOG(\'reindexing SM @%s\' % simulation_movement.getPath())\n
 \n
LOG(\'END\')\n
</string> </value>
        </item>
        <item>
            <key> <string>_code</string> </key>
            <value> <string encoding="base64">YwAAAAAAAAAAAQAAAEAAAABzDQAAAGQBAIQAAFoAAGQAAFMoAgAAAE5jAQAAAAgAAAAPAAAAAwAA
AHOsAAAAdAAAfAAAZAEAgwIAiQAAhwAAZAIAhgAAfQMAZAMAhAAAfQMAfAMAZAQAgwEAAXhtAHQE
AHQFAIgAAGQFAIMCAIMAAIMBAERdUwB9BgB4SgB0BAB0BQB8BgBkBgCDAgCDAACDAQBEXTAAfQcA
dAUAfAcAZAcAgwIAgwAAAXwDAGQIAHQFAHwHAGQJAIMCAIMAABaDAQABcWYAV3FHAFd8AwBkCgCD
AQABZAAAUygLAAAATnMGAAAAb2JqZWN0YwEAAAADAAAABQAAAAMAAABzJgAAAHQAAIgAAGQBAIMC
AGQCAHQAAIgAAGQDAIMCAIMAABZ8AACDAgBTKAQAAABOcwMAAABsb2dzRgAAAGRlbGl2ZXJ5X2Vk
aXRfd29ya2Zsb3cuRGVsaXZlcnlfUmVpbmRleFJlbGF0ZWRTaW11bGF0aW9uTW92ZW1lbnQgKCVz
KQpzBwAAAGdldFBhdGgoAwAAAHMJAAAAX2dldGF0dHJfcwgAAABkZWxpdmVyeXMDAAAAbXNnKAMA
AABzAwAAAG1zZ3MJAAAAX2dldGF0dHJfcwgAAABkZWxpdmVyeSgBAAAAcwgAAABkZWxpdmVyeSgA
AAAAcw8AAABTY3JpcHQgKFB5dGhvbilzCgAAADxsYW1iZGEuOD4TAAAAcwAAAABjAQAAAAIAAAAB
AAAAQwAAAHMEAAAAdAAAUygBAAAATigBAAAAcwQAAABOb25lKAIAAABzAwAAAG1zZ3MEAAAATm9u
ZSgAAAAAKAAAAABzDwAAAFNjcmlwdCAoUHl0aG9uKXMKAAAAPGxhbWJkYS45PhQAAABzAAAAAHMF
AAAAQkVHSU5zDwAAAGdldE1vdmVtZW50TGlzdHMbAAAAZ2V0RGVsaXZlcnlSZWxhdGVkVmFsdWVM
aXN0cxYAAAByZWN1cnNpdmVSZWluZGV4T2JqZWN0cxEAAAByZWluZGV4aW5nIFNNIEAlc3MHAAAA
Z2V0UGF0aHMDAAAARU5EKAgAAABzCQAAAF9nZXRpdGVtX3MDAAAAc2NpcwgAAABkZWxpdmVyeXMD
AAAATE9HcwkAAABfZ2V0aXRlcl9zCQAAAF9nZXRhdHRyX3MIAAAAbW92ZW1lbnRzEwAAAHNpbXVs
YXRpb25fbW92ZW1lbnQoCAAAAHMDAAAAc2NpcwkAAABfZ2V0aXRlbV9zCAAAAGRlbGl2ZXJ5cwMA
AABMT0dzCQAAAF9nZXRpdGVyX3MJAAAAX2dldGF0dHJfcwgAAABtb3ZlbWVudHMTAAAAc2ltdWxh
dGlvbl9tb3ZlbWVudCgAAAAAKAEAAABzCAAAAGRlbGl2ZXJ5cw8AAABTY3JpcHQgKFB5dGhvbilz
KQAAAERlbGl2ZXJ5X1JlaW5kZXhSZWxhdGVkU2ltdWxhdGlvbk1vdmVtZW50AQAAAHMWAAAAABEP
AQwBCQIKAhkABgEZAAkBDQEiAigBAAAAcykAAABEZWxpdmVyeV9SZWluZGV4UmVsYXRlZFNpbXVs
YXRpb25Nb3ZlbWVudCgBAAAAcykAAABEZWxpdmVyeV9SZWluZGV4UmVsYXRlZFNpbXVsYXRpb25N
b3ZlbWVudCgAAAAAKAAAAABzDwAAAFNjcmlwdCAoUHl0aG9uKXMIAAAAPG1vZHVsZT4BAAAAcwAA
AAA=</string> </value>
        </item>
        <item>
            <key> <string>_filepath</string> </key>
            <value> <string>Script (Python):/nexedi/portal_workflow/delivery_edit_workflow/scripts/Delivery_ReindexRelatedSimulationMovement</string> </value>
        </item>
        <item>
            <key> <string>_params</string> </key>
            <value> <string>sci</string> </value>
        </item>
        <item>
            <key> <string>errors</string> </key>
            <value>
              <tuple/>
            </value>
        </item>
        <item>
            <key> <string>func_code</string> </key>
            <value>
              <object>
                <klass>
                  <global name="FuncCode" module="Shared.DC.Scripts.Signature"/>
                </klass>
                <tuple/>
                <state>
                  <dictionary>
                    <item>
                        <key> <string>co_argcount</string> </key>
                        <value> <int>1</int> </value>
                    </item>
                    <item>
                        <key> <string>co_varnames</string> </key>
                        <value>
                          <tuple>
                            <string>sci</string>
                            <string>_getitem_</string>
                            <string>delivery</string>
                            <string>LOG</string>
                            <string>_getiter_</string>
                            <string>_getattr_</string>
                            <string>movement</string>
                            <string>simulation_movement</string>
                          </tuple>
                        </value>
                    </item>
                  </dictionary>
                </state>
              </object>
            </value>
        </item>
        <item>
            <key> <string>func_defaults</string> </key>
            <value>
              <none/>
            </value>
        </item>
        <item>
            <key> <string>id</string> </key>
            <value> <string>Delivery_ReindexRelatedSimulationMovement</string> </value>
        </item>
        <item>
            <key> <string>warnings</string> </key>
            <value>
              <tuple/>
            </value>
        </item>
      </dictionary>
    </pickle>
  </record>
</ZopeData>
