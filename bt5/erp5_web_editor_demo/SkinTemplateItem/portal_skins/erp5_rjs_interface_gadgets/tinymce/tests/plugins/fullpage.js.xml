<?xml version="1.0"?>
<ZopeData>
  <record id="1" aka="AAAAAAAAAAE=">
    <pickle>
      <global name="File" module="OFS.Image"/>
    </pickle>
    <pickle>
      <dictionary>
        <item>
            <key> <string>_EtagSupport__etag</string> </key>
            <value> <string>ts41268117.47</string> </value>
        </item>
        <item>
            <key> <string>__name__</string> </key>
            <value> <string>fullpage.js</string> </value>
        </item>
        <item>
            <key> <string>content_type</string> </key>
            <value> <string>application/javascript</string> </value>
        </item>
        <item>
            <key> <string>data</string> </key>
            <value> <string encoding="cdata"><![CDATA[

module("tinymce.plugins.Fullpage", {\n
\tsetupModule: function() {\n
\t\tQUnit.stop();\n
\n
\t\ttinymce.init({\n
\t\t\tselector: "textarea",\n
\t\t\tplugins: "fullpage",\n
\t\t\tadd_unload_trigger: false,\n
\t\t\tskin: false,\n
\t\t\tvalid_styles: {\n
\t\t\t\t\'*\': \'text-align,padding-left,color,font-size,font-family,background-color,font-weight,font-style,text-decoration,float,margin,margin-top,margin-right,margin-bottom,margin-left,display\'\n
\t\t\t},\n
\t\t\tindent: 0,\n
\t\t\tsetup: function(ed) {\n
\t\t\t\ted.on(\'NodeChange\', false);\n
\t\t\t},\n
\t\t\tinit_instance_callback: function(ed) {\n
\t\t\t\twindow.editor = ed;\n
\t\t\t\tQUnit.start();\n
\t\t\t}\n
\t\t});\n
\t},\n
\n
\tteardown: function() {\n
\t\teditor.getBody().dir = \'ltr\';\n
\t}\n
});\n
\n
test(\'Keep header/footer intact\', function() {\n
\texpect(2);\n
\n
\tfunction normalizeHTML(html) {\n
\t\treturn html.replace(/\\s/g, \'\');\n
\t}\n
\n
\teditor.setContent(\'<html><body><p>Test</p>\');\n
\tequal(normalizeHTML(editor.getContent()), \'<html><body><p>Test</p>\', \'Invalid HTML content is still editable.\');\n
\n
\teditor.setContent(\'<html><body><p>Test</p></body></html>\');\n
\tequal(normalizeHTML(editor.getContent()), \'<html><body><p>Test</p></body></html>\', \'Header/footer is intact.\');\n
});\n
\n
test(\'Default header/footer\', function() {\n
\texpect(1);\n
\n
\teditor.setContent(\'<p>Test</p>\');\n
\tequal(editor.getContent(), \'<!DOCTYPE html>\\n<html>\\n<head>\\n</head>\\n<body>\\n<p>Test</p>\\n</body>\\n</html>\', \'Invalid HTML content is still editable.\');\n
});\n
\n
test(\'Parse body attributes\', function() {\n
\texpect(9);\n
\n
\teditor.setContent(\'<html><body><p>Test</p></body></html>\');\n
\tequal(editor.getBody().style.color, \'\', \'No color on body.\');\n
\tequal(editor.getBody().dir, \'\', \'No dir on body.\');\n
\tequal(editor.dom.getStyle(editor.getBody().firstChild, \'display\', true), \'block\', \'No styles added to iframe document\');\n
\n
\teditor.setContent(\'<html><body style="color:#FF0000"><p>Test</p></body></html>\');\n
\tok(editor.getBody().style.color.length > 0, \'Color added to body\');\n
\n
\teditor.setContent(\'<html><body dir="rtl"><p>Test</p></body></html>\');\n
\tequal(editor.getBody().dir, \'rtl\', \'Dir added to body\');\n
\n
\teditor.setContent(\'<html><head><style>p {text-align:right}</style></head><body dir="rtl"><p>Test</p></body></html>\');\n
\tequal(editor.dom.getStyle(editor.getBody().firstChild, \'text-align\', true), \'right\', \'Styles added to iframe document\');\n
\n
\teditor.setContent(\'<html><body><p>Test</p></body></html>\');\n
\tequal(editor.getBody().style.color, \'\', \'No color on body.\');\n
\tequal(editor.getBody().dir, \'\', \'No dir on body.\');\n
\tequal(editor.dom.getStyle(editor.getBody().firstChild, \'display\', true), \'block\', \'No styles added to iframe document\');\n
});\n
\n
test(\'fullpage_hide_in_source_view: false\', function() {\n
\teditor.settings.fullpage_hide_in_source_view = false;\n
\teditor.setContent(\'<html><body><p>1</p></body></html>\');\n
\tequal(editor.getContent({source_view: true}), \'<html><body>\\n<p>1</p>\\n</body></html>\');\n
});\n
\n
test(\'fullpage_hide_in_source_view: false\', function() {\n
\teditor.settings.fullpage_hide_in_source_view = true;\n
\teditor.setContent(\'<html><body><p>1</p></body></html>\');\n
\tequal(editor.getContent({source_view: true}), \'<p>1</p>\');\n
});\n
\n
test(\'link elements\', function() {\n
\teditor.setContent(\'<html><head><link rel="stylesheet" href="a.css"><link rel="something"></head><body><p>c</p></body></html>\');\n
\tequal(editor.getContent(), \'<html><head><link rel="stylesheet" href="a.css"><link rel="something"></head><body>\\n<p>c</p>\\n</body></html>\');\n
});\n
\n
test(\'add/remove stylesheets\', function() {\n
\tfunction hasLink(href) {\n
\t\tvar links = editor.getDoc().getElementsByTagName(\'link\');\n
\n
\t\tfor (var i = 0; i < links.length; i++) {\n
\t\t\tif (links[i].href.indexOf(\'/\' + href) != -1) {\n
\t\t\t\treturn true;\n
\t\t\t}\n
\t\t}\n
\t}\n
\n
\teditor.setContent(\'<html><head><link rel="stylesheet" href="a.css"></head><body><p>c</p></body></html>\');\n
\tok(hasLink("a.css"));\n
\tok(!hasLink("b.css"));\n
\tok(!hasLink("c.css"));\n
\n
\teditor.setContent(\'<html><head><link rel="stylesheet" href="a.css"><link rel="stylesheet" href="b.css"></head><body><p>c</p></body></html>\');\n
\tok(hasLink("a.css"));\n
\tok(hasLink("b.css"));\n
\tok(!hasLink("c.css"));\n
\n
\teditor.setContent(\'<html><head><link rel="stylesheet" href="a.css"><link rel="stylesheet" href="b.css"><link rel="stylesheet" href="c.css"></head><body><p>c</p></body></html>\');\n
\tok(hasLink("a.css"));\n
\tok(hasLink("b.css"));\n
\tok(hasLink("c.css"));\n
\n
\teditor.setContent(\'<html><head><link rel="stylesheet" href="a.css"></head><body><p>c</p></body></html>\');\n
\tok(hasLink("a.css"));\n
\tok(!hasLink("b.css"));\n
\tok(!hasLink("c.css"));\n
\n
\teditor.setContent(\'<html><head></head><body><p>c</p></body></html>\');\n
\tok(!hasLink("a.css"));\n
\tok(!hasLink("b.css"));\n
\tok(!hasLink("c.css"));\n
});\n


]]></string> </value>
        </item>
        <item>
            <key> <string>precondition</string> </key>
            <value> <string></string> </value>
        </item>
        <item>
            <key> <string>size</string> </key>
            <value> <int>4589</int> </value>
        </item>
        <item>
            <key> <string>title</string> </key>
            <value> <string>fullpage.js</string> </value>
        </item>
      </dictionary>
    </pickle>
  </record>
</ZopeData>
