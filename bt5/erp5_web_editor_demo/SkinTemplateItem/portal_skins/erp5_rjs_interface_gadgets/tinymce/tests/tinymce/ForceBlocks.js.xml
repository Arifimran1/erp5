<?xml version="1.0"?>
<ZopeData>
  <record id="1" aka="AAAAAAAAAAE=">
    <pickle>
      <global name="File" module="OFS.Image"/>
    </pickle>
    <pickle>
      <dictionary>
        <item>
            <key> <string>_EtagSupport__etag</string> </key>
            <value> <string>ts41268204.49</string> </value>
        </item>
        <item>
            <key> <string>__name__</string> </key>
            <value> <string>ForceBlocks.js</string> </value>
        </item>
        <item>
            <key> <string>content_type</string> </key>
            <value> <string>application/javascript</string> </value>
        </item>
        <item>
            <key> <string>data</string> </key>
            <value> <string encoding="cdata"><![CDATA[

module("tinymce.ForceBlocks", {\n
\tautostart: false,\n
\tsetupModule: function() {\n
\t\tQUnit.stop();\n
\n
\t\ttinymce.init({\n
\t\t\tselector: "textarea",\n
\t\t\tadd_unload_trigger: false,\n
\t\t\tindent: false,\n
\t\t\tskin: false,\n
\t\t\tentities: \'raw\',\n
\t\t\tvalid_styles: {\n
\t\t\t\t\'*\': \'color,font-size,font-family,background-color,font-weight,font-style,text-decoration,float,margin,margin-top,margin-right,margin-bottom,margin-left,display\'\n
\t\t\t},\n
\t\t\tinit_instance_callback: function(ed) {\n
\t\t\t\twindow.editor = ed;\n
\t\t\t\tQUnit.start();\n
\t\t\t}\n
\t\t});\n
\t},\n
\n
\tteardown: function() {\n
\t\teditor.settings.forced_root_block = \'p\';\n
\t\teditor.settings.forced_root_block_attrs = null;\n
\t}\n
});\n
\n
test(\'Wrap single root text node in P\', function() {\n
\teditor.getBody().innerHTML = \'abcd\';\n
\tUtils.setSelection(\'body\', 2);\n
\tUtils.pressArrowKey();\n
\tequal(Utils.cleanHtml(editor.getBody().innerHTML), \'<p>abcd</p>\');\n
\tequal(editor.selection.getNode().nodeName, \'P\');\n
});\n
\n
test(\'Wrap single root text node in P with attrs\', function() {\n
\teditor.settings.forced_root_block_attrs = {"class": "class1"};\n
\teditor.getBody().innerHTML = \'abcd\';\n
\tUtils.setSelection(\'body\', 2);\n
\tUtils.pressArrowKey();\n
\tequal(editor.getContent(), \'<p class="class1">abcd</p>\');\n
\tequal(editor.selection.getNode().nodeName, \'P\');\n
});\n
\n
test(\'Wrap single root text node in P but not table sibling\', function() {\n
\teditor.getBody().innerHTML = \'abcd<table><tr><td>x</td></tr></table>\';\n
\tUtils.setSelection(\'body\', 2);\n
\tUtils.pressArrowKey();\n
\tequal(Utils.cleanHtml(editor.getBody().innerHTML), \'<p>abcd</p><table><tbody><tr><td>x</td></tr></tbody></table>\');\n
\tequal(editor.selection.getNode().nodeName, \'P\');\n
});\n
\n
test(\'Wrap root em in P but not table sibling\', function() {\n
\teditor.getBody().innerHTML = \'<em>abcd</em><table><tr><td>x</td></tr></table>\';\n
\tUtils.setSelection(\'em\', 2);\n
\tUtils.pressArrowKey();\n
\tequal(Utils.cleanHtml(editor.getBody().innerHTML), \'<p><em>abcd</em></p><table><tbody><tr><td>x</td></tr></tbody></table>\');\n
\tequal(editor.selection.getNode().nodeName, \'EM\');\n
});\n
\n
test(\'Wrap single root text node in DIV\', function() {\n
\teditor.settings.forced_root_block = \'div\';\n
\teditor.getBody().innerHTML = \'abcd\';\n
\tUtils.setSelection(\'body\', 2);\n
\tUtils.pressArrowKey();\n
\tequal(Utils.cleanHtml(editor.getBody().innerHTML), \'<div>abcd</div>\');\n
\tequal(editor.selection.getNode().nodeName, \'DIV\');\n
});\n
\n
test(\'Remove empty root text nodes\', function() {\n
\tvar body = editor.getBody();\n
\n
\teditor.settings.forced_root_block = \'div\';\n
\teditor.getBody().innerHTML = \'abcd<div>abcd</div>\';\n
\tbody.insertBefore(editor.getDoc().createTextNode(\'\'), body.firstChild);\n
\tbody.appendChild(editor.getDoc().createTextNode(\'\'));\n
\n
\tvar rng = editor.dom.createRng();\n
\trng.setStart(editor.getBody().childNodes[1], 1);\n
\trng.setEnd(editor.getBody().childNodes[1], 1);\n
\teditor.selection.setRng(rng);\n
\n
\tUtils.pressArrowKey();\n
\tequal(Utils.cleanHtml(body.innerHTML), \'<div>abcd</div><div>abcd</div>\');\n
\tequal(editor.selection.getNode().nodeName, \'DIV\');\n
\tequal(body.childNodes.length, 2);\n
});\n


]]></string> </value>
        </item>
        <item>
            <key> <string>precondition</string> </key>
            <value> <string></string> </value>
        </item>
        <item>
            <key> <string>size</string> </key>
            <value> <int>2981</int> </value>
        </item>
        <item>
            <key> <string>title</string> </key>
            <value> <string>ForceBlocks.js</string> </value>
        </item>
      </dictionary>
    </pickle>
  </record>
</ZopeData>
