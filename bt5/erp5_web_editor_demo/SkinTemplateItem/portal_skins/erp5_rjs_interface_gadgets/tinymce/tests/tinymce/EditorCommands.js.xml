<?xml version="1.0"?>
<ZopeData>
  <record id="1" aka="AAAAAAAAAAE=">
    <pickle>
      <global name="File" module="OFS.Image"/>
    </pickle>
    <pickle>
      <dictionary>
        <item>
            <key> <string>_EtagSupport__etag</string> </key>
            <value> <string>ts41268226.11</string> </value>
        </item>
        <item>
            <key> <string>__name__</string> </key>
            <value> <string>EditorCommands.js</string> </value>
        </item>
        <item>
            <key> <string>content_type</string> </key>
            <value> <string>application/javascript</string> </value>
        </item>
        <item>
            <key> <string>data</string> </key>
            <value> <string encoding="cdata"><![CDATA[

module("tinymce.EditorCommands", {\n
\tsetupModule: function() {\n
\t\tQUnit.stop();\n
\n
\t\ttinymce.init({\n
\t\t\tselector: "textarea",\n
\t\t\tadd_unload_trigger: false,\n
\t\t\tdisable_nodechange: true,\n
\t\t\tindent: false,\n
\t\t\tskin: false,\n
\t\t\tentities: \'raw\',\n
\t\t\tconvert_urls: false,\n
\t\t\tvalid_styles: {\n
\t\t\t\t\'*\': \'color,font-size,font-family,background-color,font-weight,font-style,text-decoration,float,margin,margin-top,margin-right,margin-bottom,margin-left,padding-left,text-align,display\'\n
\t\t\t},\n
\t\t\tinit_instance_callback: function(ed) {\n
\t\t\t\twindow.editor = ed;\n
\t\t\t\tQUnit.start();\n
\t\t\t}\n
\t\t});\n
\t}\n
});\n
\n
function getContent() {\n
\treturn editor.getContent({format:\'raw\'}).toLowerCase().replace(/[\\r\\n]+/g, \'\');\n
}\n
\n
test(\'mceInsertContent - p inside text of p\', function() {\n
\tvar rng;\n
\n
\texpect(7);\n
\n
\teditor.setContent(\'<p>1234</p>\');\n
\teditor.focus();\n
\trng = editor.dom.createRng();\n
\trng.setStart(editor.dom.select(\'p\')[0].firstChild, 1);\n
\trng.setEnd(editor.dom.select(\'p\')[0].firstChild, 3);\n
\teditor.selection.setRng(rng);\n
\teditor.execCommand(\'mceInsertContent\', false, \'<p>abc</p>\');\n
\tequal(getContent(), \'<p>1</p><p>abc</p><p>4</p>\');\n
\trng = Utils.normalizeRng(editor.selection.getRng(true));\n
\tok(rng.collapsed);\n
\tequal(rng.startContainer.nodeName, \'P\');\n
\tequal(rng.startOffset, 1);\n
\tequal(rng.endContainer.nodeName, \'P\');\n
\tequal(rng.endOffset, 1);\n
\tequal(rng.startContainer.innerHTML, \'abc\');\n
});\n
\n
test(\'mceInsertContent - p inside whole p\', function() {\n
\tvar rng;\n
\n
\texpect(7);\n
\n
\teditor.setContent(\'<p>1234</p>\');\n
\trng = editor.dom.createRng();\n
\trng.setStart(editor.dom.select(\'p\')[0].firstChild, 0);\n
\trng.setEnd(editor.dom.select(\'p\')[0].firstChild, 4);\n
\teditor.selection.setRng(rng);\n
\teditor.execCommand(\'mceInsertContent\', false, \'<p>abc</p>\');\n
\tequal(getContent(), \'<p>abc</p>\');\n
\trng = Utils.normalizeRng(editor.selection.getRng(true));\n
\tok(rng.collapsed);\n
\tequal(rng.startContainer.nodeName, \'P\');\n
\tequal(rng.startOffset, 1);\n
\tequal(rng.endContainer.nodeName, \'P\');\n
\tequal(rng.endOffset, 1);\n
\tequal(rng.startContainer.innerHTML, \'abc\');\n
});\n
\n
test(\'mceInsertContent - pre in text of pre\', function() {\n
\tvar rng;\n
\n
\texpect(7);\n
\n
\teditor.setContent(\'<pre>1234</pre>\');\n
\trng = editor.dom.createRng();\n
\trng.setStart(editor.dom.select(\'pre\')[0].firstChild, 1);\n
\trng.setEnd(editor.dom.select(\'pre\')[0].firstChild, 3);\n
\teditor.selection.setRng(rng);\n
\teditor.execCommand(\'mceInsertContent\', false, \'<pre>abc</pre>\');\n
\tequal(getContent(), \'<pre>1</pre><pre>abc</pre><pre>4</pre>\');\n
\trng = Utils.normalizeRng(editor.selection.getRng(true));\n
\tok(rng.collapsed);\n
\tequal(rng.startContainer.nodeName, \'PRE\');\n
\tequal(rng.startOffset, 1);\n
\tequal(rng.endContainer.nodeName, \'PRE\');\n
\tequal(rng.endOffset, 1);\n
\tequal(rng.startContainer.innerHTML, \'abc\');\n
});\n
\n
test(\'mceInsertContent - h1 in text of h1\', function() {\n
\tvar rng;\n
\n
\texpect(7);\n
\n
\teditor.setContent(\'<h1>1234</h1>\');\n
\trng = editor.dom.createRng();\n
\trng.setStart(editor.dom.select(\'h1\')[0].firstChild, 1);\n
\trng.setEnd(editor.dom.select(\'h1\')[0].firstChild, 3);\n
\teditor.selection.setRng(rng);\n
\teditor.execCommand(\'mceInsertContent\', false, \'<h1>abc</h1>\');\n
\tequal(getContent(), \'<h1>1</h1><h1>abc</h1><h1>4</h1>\');\n
\trng = Utils.normalizeRng(editor.selection.getRng(true));\n
\tok(rng.collapsed);\n
\tequal(rng.startContainer.nodeName, \'H1\');\n
\tequal(rng.startOffset, 1);\n
\tequal(rng.endContainer.nodeName, \'H1\');\n
\tequal(rng.endOffset, 1);\n
\tequal(rng.startContainer.innerHTML, \'abc\');\n
});\n
\n
test(\'mceInsertContent - li inside li\', function() {\n
\tvar rng;\n
\n
\texpect(7);\n
\n
\teditor.setContent(\'<ul><li>1234</li></ul>\');\n
\trng = editor.dom.createRng();\n
\trng.setStart(editor.dom.select(\'li\')[0].firstChild, 1);\n
\trng.setEnd(editor.dom.select(\'li\')[0].firstChild, 3);\n
\teditor.selection.setRng(rng);\n
\teditor.execCommand(\'mceInsertContent\', false, \'<li>abc</li>\');\n
\tequal(getContent(), \'<ul><li>1</li><li>abc</li><li>4</li></ul>\');\n
\trng = Utils.normalizeRng(editor.selection.getRng(true));\n
\tok(rng.collapsed);\n
\tequal(rng.startContainer.nodeName, \'LI\');\n
\tequal(rng.startOffset, 1);\n
\tequal(rng.endContainer.nodeName, \'LI\');\n
\tequal(rng.endOffset, 1);\n
\tequal(rng.startContainer.innerHTML, \'abc\');\n
});\n
\n
test(\'mceInsertContent - p inside empty editor\', function() {\n
\tvar rng;\n
\n
\texpect(7);\n
\n
\teditor.setContent(\'\');\n
\teditor.execCommand(\'mceInsertContent\', false, \'<p>abc</p>\');\n
\tequal(getContent(), \'<p>abc</p>\');\n
\trng = Utils.normalizeRng(editor.selection.getRng(true));\n
\tok(rng.collapsed);\n
\tequal(rng.startContainer.nodeName, \'P\');\n
\tequal(rng.startOffset, 1);\n
\tequal(rng.endContainer.nodeName, \'P\');\n
\tequal(rng.endOffset, 1);\n
\tequal(rng.startContainer.innerHTML, \'abc\');\n
});\n
\n
test(\'mceInsertContent - text inside empty p\', function() {\n
\tvar rng;\n
\n
\texpect(7);\n
\n
\teditor.getBody().innerHTML = \'<p></p>\';\n
\tUtils.setSelection(\'p\', 0);\n
\teditor.execCommand(\'mceInsertContent\', false, \'abc\');\n
\tequal(editor.getBody().innerHTML.toLowerCase().replace(/^<br>/, \'\'), \'<p>abc</p>\'); // Opera inserts a BR at the beginning of contents if the P is empty\n
\trng = Utils.normalizeRng(editor.selection.getRng(true));\n
\tok(rng.collapsed);\n
\tequal(rng.startContainer.nodeName, \'P\');\n
\tequal(rng.startOffset, 1);\n
\tequal(rng.endContainer.nodeName, \'P\');\n
\tequal(rng.endOffset, 1);\n
\tequal(rng.startContainer.innerHTML, \'abc\');\n
});\n
\n
test(\'mceInsertContent - text inside empty p with br caret node\', function() {\n
\tvar rng;\n
\n
\texpect(7);\n
\n
\teditor.getBody().innerHTML = \'<p><br></p>\';\n
\trng = editor.dom.createRng();\n
\trng.setStart(editor.getBody().firstChild, 0);\n
\trng.setEnd(editor.getBody().firstChild, 0);\n
\teditor.selection.setRng(rng);\n
\teditor.execCommand(\'mceInsertContent\', false, \'abc\');\n
\tequal(editor.getBody().innerHTML.toLowerCase(), \'<p>abc</p>\');\n
\trng = Utils.normalizeRng(editor.selection.getRng(true));\n
\tok(rng.collapsed);\n
\tequal(rng.startContainer.nodeName, \'P\');\n
\tequal(rng.startOffset, 1);\n
\tequal(rng.endContainer.nodeName, \'P\');\n
\tequal(rng.endOffset, 1);\n
\tequal(rng.startContainer.innerHTML, \'abc\');\n
});\n
\n
test(\'mceInsertContent - image inside p\', function() {\n
\tvar rng;\n
\n
\texpect(6);\n
\n
\teditor.setContent(\'<p>1</p>\');\n
\trng = editor.dom.createRng();\n
\trng.setStart(editor.dom.select(\'p\')[0].firstChild, 0);\n
\trng.setEnd(editor.dom.select(\'p\')[0].firstChild, 1);\n
\teditor.selection.setRng(rng);\n
\teditor.execCommand(\'mceInsertContent\', false, \'<img src="about:blank" />\');\n
\tequal(editor.getContent(), \'<p><img src="about:blank" alt="" /></p>\');\n
\trng = Utils.normalizeRng(editor.selection.getRng(true));\n
\tok(rng.collapsed);\n
\tequal(rng.startContainer.nodeName, \'P\');\n
\tequal(rng.startOffset, 1);\n
\tequal(rng.endContainer.nodeName, \'P\');\n
\tequal(rng.endOffset, 1);\n
});\n
\n
test(\'mceInsertContent - legacy content\', function() {\n
\tvar rng;\n
\n
\texpect(1);\n
\n
\t// Convert legacy content\n
\teditor.setContent(\'<p>1</p>\');\n
\trng = editor.dom.createRng();\n
\trng.setStart(editor.dom.select(\'p\')[0].firstChild, 0);\n
\trng.setEnd(editor.dom.select(\'p\')[0].firstChild, 1);\n
\teditor.selection.setRng(rng);\n
\teditor.execCommand(\'mceInsertContent\', false, \'<strike>strike</strike><font size="7">font</font>\');\n
\tequal(editor.getContent(), \'<p><span style="text-decoration: line-through;">strike</span><span style="font-size: 300%;">font</span></p>\');\n
});\n
\n
test(\'mceInsertContent - hr\', function() {\n
\tvar rng;\n
\n
\texpect(7);\n
\n
\teditor.setContent(\'<p>123</p>\');\n
\trng = editor.dom.createRng();\n
\trng.setStart(editor.dom.select(\'p\')[0].firstChild, 1);\n
\trng.setEnd(editor.dom.select(\'p\')[0].firstChild, 2);\n
\teditor.selection.setRng(rng);\n
\teditor.execCommand(\'mceInsertContent\', false, \'<hr />\');\n
\tequal(editor.getContent(), \'<p>1</p><hr /><p>3</p>\');\n
\trng = Utils.normalizeRng(editor.selection.getRng(true));\n
\tok(rng.collapsed);\n
\tequal(rng.startContainer, editor.getBody().lastChild);\n
\tequal(rng.startContainer.nodeName, \'P\');\n
\tequal(rng.startOffset, 0);\n
\tequal(rng.endContainer.nodeName, \'P\');\n
\tequal(rng.endOffset, 0);\n
});\n
\n
test(\'mceInsertContent - forced root block\', function() {\n
\texpect(1);\n
\n
\t// Forced root block\n
\teditor.getBody().innerHTML = \'\';\n
\teditor.execCommand(\'mceInsertContent\', false, \'test<b>123</b><!-- a -->\');\n
\t// Opera adds an extra paragraph since it adds a BR at the end of the contents pass though this for now since it\'s an minority browser\n
\tequal(editor.getContent().replace(/<p>\\u00a0<\\/p>/g, \'\'), \'<p>test<strong>123</strong></p><!-- a -->\');\n
});\n
\n
test(\'mceInsertContent - mixed inline content inside td\', function() {\n
\texpect(1);\n
\n
\t// Forced root block\n
\teditor.getBody().innerHTML = \'<table><tr><td>X</td></tr></table>\';\n
\tUtils.setSelection(\'td\', 0, \'td\', 0);\n
\teditor.execCommand(\'mceInsertContent\', false, \'test<b>123</b><!-- a -->\');\n
\tequal(editor.getContent(), \'<table><tbody><tr><td>test<strong>123</strong><!-- a -->X</td></tr></tbody></table>\');\n
});\n
\n
test(\'mceInsertContent - invalid insertion with spans on page\', function(){\n
\tvar startingContent = \'<p>123 testing <em>span later in document</em></p>\',\n
\t\tinsertedContent = \'<ul><li>u</li><li>l</li></ul>\';\n
\teditor.setContent(startingContent);\n
\tvar rng = editor.dom.createRng();\n
\trng.setStart(editor.dom.select(\'p\')[0].firstChild, 0);\n
\trng.setEnd(editor.dom.select(\'p\')[0].firstChild, 0);\n
\teditor.selection.setRng(rng);\n
\teditor.execCommand(\'mceInsertContent\', false, insertedContent);\n
\n
\tequal(editor.getContent(), insertedContent + startingContent);\n
});\n
\n
test(\'mceInsertContent - text with space before at start of block\', function() {\n
\teditor.getBody().innerHTML = \'<p>a</p>\';\n
\tUtils.setSelection(\'p\', 0);\n
\teditor.execCommand(\'mceInsertContent\', false, \' b\');\n
\tequal(editor.getContent(), \'<p>\\u00a0ba</p>\');\n
});\n
\n
test(\'mceInsertContent - text with space after at end of block\', function() {\n
\teditor.getBody().innerHTML = \'<p>a</p>\';\n
\tUtils.setSelection(\'p\', 1);\n
\teditor.execCommand(\'mceInsertContent\', false, \'b \');\n
\tequal(editor.getContent(), \'<p>ab\\u00a0</p>\');\n
});\n
\n
test(\'mceInsertContent - text with space before/after at middle of block\', function() {\n
\teditor.getBody().innerHTML = \'<p>ac</p>\';\n
\tUtils.setSelection(\'p\', 1);\n
\teditor.execCommand(\'mceInsertContent\', false, \' b \');\n
\tequal(editor.getContent(), \'<p>a b c</p>\');\n
});\n
\n
test(\'mceInsertContent - inline element with space before/after at middle of block\', function() {\n
\teditor.getBody().innerHTML = \'<p>ac</p>\';\n
\tUtils.setSelection(\'p\', 1);\n
\teditor.execCommand(\'mceInsertContent\', false, \' <em>b</em> \');\n
\tequal(editor.getContent(), \'<p>a <em>b</em> c</p>\');\n
});\n
\n
test(\'mceInsertContent - block element with space before/after at middle of block\', function() {\n
\teditor.getBody().innerHTML = \'<p>ac</p>\';\n
\tUtils.setSelection(\'p\', 1);\n
\teditor.execCommand(\'mceInsertContent\', false, \' <p>b</p> \');\n
\tequal(editor.getContent(), \'<p>a</p><p>b</p><p>c</p>\');\n
});\n
\n
test(\'mceInsertContent - strong in strong\', function() {\n
\teditor.getBody().innerHTML = \'<strong>ac</strong>\';\n
\tUtils.setSelection(\'strong\', 1);\n
\teditor.execCommand(\'mceInsertContent\', false, {content: \'<strong>b</strong>\', merge: true});\n
\tequal(editor.getContent(), \'<p><strong>abc</strong></p>\');\n
});\n
\n
test(\'mceInsertContent - span in span same style color\', function() {\n
\teditor.getBody().innerHTML = \'<span style="color:#ff0000">ac</strong>\';\n
\tUtils.setSelection(\'span\', 1);\n
\teditor.execCommand(\'mceInsertContent\', false, {content: \'<span style="color:#ff0000">b</span>\', merge: true});\n
\tequal(editor.getContent(), \'<p><span style="color: #ff0000;">abc</span></p>\');\n
});\n
\n
test(\'mceInsertContent - span in span different style color\', function() {\n
\teditor.getBody().innerHTML = \'<span style="color:#ff0000">ac</strong>\';\n
\tUtils.setSelection(\'span\', 1);\n
\teditor.execCommand(\'mceInsertContent\', false, {content: \'<span style="color:#00ff00">b</span>\', merge: true});\n
\tequal(editor.getContent(), \'<p><span style="color: #ff0000;">a<span style="color: #00ff00;">b</span>c</span></p>\');\n
});\n
\n
test(\'mceInsertContent - select with option element\', function() {\n
\teditor.getBody().innerHTML = \'<p>1</p>\';\n
\tUtils.setSelection(\'p\', 1);\n
\teditor.execCommand(\'mceInsertContent\', false, \'2<select><option selected="selected">3</option></select>\');\n
\tequal(editor.getContent(), \'<p>12<select><option selected="selected">3</option></select></p>\');\n
});\n
\n
test(\'mceInsertContent - insert P in span style element #7090\', function() {\n
\teditor.setContent(\'<p><span style="color: red">1</span></p><p>3</p>\');\n
\tUtils.setSelection(\'span\', 1);\n
\teditor.execCommand(\'mceInsertContent\', false, \'<p>2</p>\');\n
\tequal(editor.getContent(), \'<p><span style="color: red;">1</span></p><p>2</p><p>3</p>\');\n
});\n
\n
test(\'mceInsertContent - insert char at char surrounded by spaces\', function() {\n
\teditor.setContent(\'<p>a b c</p>\');\n
\tUtils.setSelection(\'p\', 2, \'p\', 3);\n
\teditor.execCommand(\'mceInsertContent\', false, \'X\');\n
\tequal(tinymce.util.JSON.serialize(editor.getContent()), \'"<p>a X c</p>"\');\n
});\n
\n
test(\'InsertHorizontalRule\', function() {\n
\tvar rng;\n
\n
\texpect(7);\n
\n
\teditor.setContent(\'<p>123</p>\');\n
\trng = editor.dom.createRng();\n
\trng.setStart(editor.dom.select(\'p\')[0].firstChild, 1);\n
\trng.setEnd(editor.dom.select(\'p\')[0].firstChild, 2);\n
\teditor.selection.setRng(rng);\n
\teditor.execCommand(\'InsertHorizontalRule\');\n
\tequal(editor.getContent(), \'<p>1</p><hr /><p>3</p>\');\n
\trng = Utils.normalizeRng(editor.selection.getRng(true));\n
\tok(rng.collapsed);\n
\tequal(rng.startContainer, editor.getBody().lastChild);\n
\tequal(rng.startContainer.nodeName, \'P\');\n
\tequal(rng.startOffset, 0);\n
\tequal(rng.endContainer.nodeName, \'P\');\n
\tequal(rng.endOffset, 0);\n
});\n
\n
test(\'Justify - multiple block elements selected - queryCommandState\', function() {\n
\teditor.setContent(\'<div style="text-align: left;"><div id="a" style="text-align: right;">one</div><div id="b" style="text-align: right;">two</div></div>\');\n
\tUtils.setSelection(\'#a\', 0, \'#b\', 3);\n
\tequal(editor.queryCommandState(\'JustifyLeft\'), false);\n
\tok(editor.queryCommandState(\'JustifyRight\'));\n
});\n
\n
test(\'Formatting commands (xhtmlTextStyles)\', function() {\n
\teditor.focus();\n
\teditor.setContent(\'test 123\');\n
\teditor.execCommand(\'SelectAll\');\n
\teditor.execCommand(\'Bold\');\n
\tequal(editor.getContent(), "<p><strong>test 123</strong></p>");\n
\n
\teditor.setContent(\'test 123\');\n
\teditor.execCommand(\'SelectAll\');\n
\teditor.execCommand(\'Italic\');\n
\tequal(editor.getContent(), "<p><em>test 123</em></p>");\n
\n
\teditor.setContent(\'test 123\');\n
\teditor.execCommand(\'SelectAll\');\n
\teditor.execCommand(\'Underline\');\n
\tequal(editor.getContent(), \'<p><span style="text-decoration: underline;">test 123</span></p>\');\n
\n
\teditor.setContent(\'test 123\');\n
\teditor.execCommand(\'SelectAll\');\n
\teditor.execCommand(\'Strikethrough\');\n
\tequal(editor.getContent(), \'<p><span style="text-decoration: line-through;">test 123</span></p>\');\n
\n
\teditor.setContent(\'test 123\');\n
\teditor.execCommand(\'SelectAll\');\n
\teditor.execCommand(\'FontName\',false,\'Arial\');\n
\tequal(editor.getContent(), \'<p><span style="font-family: \' + Utils.fontFace(\'Arial\') + \';">test 123</span></p>\');\n
\n
\teditor.setContent(\'test 123\');\n
\teditor.execCommand(\'SelectAll\');\n
\teditor.execCommand(\'FontSize\',false,\'7\');\n
\tequal(editor.getContent(), \'<p><span style="font-size: xx-large;">test 123</span></p>\');\n
\n
\teditor.setContent(\'test 123\');\n
\teditor.execCommand(\'SelectAll\');\n
\teditor.execCommand(\'ForeColor\', false, \'#FF0000\');\n
\tequal(editor.getContent(), \'<p><span style="color: #ff0000;">test 123</span></p>\');\n
\n
\teditor.setContent(\'test 123\');\n
\teditor.execCommand(\'SelectAll\');\n
\teditor.execCommand(\'HiliteColor\', false, \'#FF0000\');\n
\tequal(editor.getContent(), \'<p><span style="background-color: #ff0000;">test 123</span></p>\');\n
\n
\teditor.setContent(\'<p><span style="text-decoration: underline;">test 123</span></p>\');\n
\tequal(editor.getContent(), \'<p><span style="text-decoration: underline;">test 123</span></p>\');\n
\n
\teditor.setContent(\'<p><span style="text-decoration: line-through;">test 123</span></p>\');\n
\tequal(editor.getContent(), \'<p><span style="text-decoration: line-through;">test 123</span></p>\');\n
\n
\teditor.setContent(\'<p><span style="font-family: Arial;">test 123</span></p>\');\n
\tequal(editor.getContent(), \'<p><span style="font-family: Arial;">test 123</span></p>\');\n
\n
\teditor.setContent(\'<p><span style="font-size: xx-large;">test 123</span></p>\');\n
\tequal(editor.getContent(), \'<p><span style="font-size: xx-large;">test 123</span></p>\');\n
\n
\teditor.setContent(\'<p><strike>test 123</strike></p>\');\n
\tequal(editor.getContent(), \'<p><span style="text-decoration: line-through;">test 123</span></p>\');\n
\n
\teditor.setContent(\'<p><font face="Arial">test 123</font></p>\');\n
\tequal(editor.getContent(), \'<p><span style="font-family: \' + Utils.fontFace(\'Arial\') + \';">test 123</span></p>\');\n
\n
\teditor.setContent(\'<p><font size="7">test 123</font></p>\');\n
\tequal(editor.getContent(), \'<p><span style="font-size: 300%;">test 123</span></p>\');\n
\n
\teditor.setContent(\'<p><font face="Arial" size="7">test 123</font></p>\');\n
\tequal(editor.getContent(), \'<p><span style="font-size: 300%; font-family: \' + Utils.fontFace(\'Arial\') + \';">test 123</span></p>\');\n
\n
\teditor.setContent(\'<font style="background-color: #ff0000" color="#ff0000">test</font><font face="Arial">test</font>\');\n
\tequal(editor.getContent(), \'<p><span style="color: #ff0000; background-color: #ff0000;">test</span><span style="font-family: \' + Utils.fontFace(\'Arial\') + \';">test</span></p>\');\n
\n
\teditor.setContent(\'<p><font face="Arial" style="color: #ff0000">test 123</font></p>\');\n
\tequal(editor.getContent(), \'<p><span style="color: #ff0000; font-family: \' + Utils.fontFace(\'Arial\') + \';">test 123</span></p>\');\n
});\n
\n
test(\'Formatting commands (alignInline)\', function() {\n
\texpect(7);\n
\n
\teditor.setContent(\'<p>test 123</p>\');\n
\teditor.execCommand(\'SelectAll\');\n
\teditor.execCommand(\'JustifyLeft\');\n
\tequal(editor.getContent(), \'<p style="text-align: left;">test 123</p>\');\n
\n
\teditor.setContent(\'<p>test 123</p>\');\n
\teditor.execCommand(\'SelectAll\');\n
\teditor.execCommand(\'JustifyCenter\');\n
\tequal(editor.getContent(), \'<p style="text-align: center;">test 123</p>\');\n
\n
\teditor.setContent(\'<p>test 123</p>\');\n
\teditor.execCommand(\'SelectAll\');\n
\teditor.execCommand(\'JustifyRight\');\n
\tequal(editor.getContent(), \'<p style="text-align: right;">test 123</p>\');\n
\n
\teditor.setContent(\'<p>test 123</p>\');\n
\teditor.execCommand(\'SelectAll\');\n
\teditor.execCommand(\'JustifyFull\');\n
\tequal(editor.getContent(), \'<p style="text-align: justify;">test 123</p>\');\n
\n
\teditor.setContent(\'<img src="tinymce/ui/img/raster.gif" />\');\n
\teditor.selection.select(editor.dom.select(\'img\')[0]);\n
\teditor.execCommand(\'JustifyLeft\');\n
\tequal(editor.getContent(), \'<p><img style="float: left;" src="tinymce/ui/img/raster.gif" alt="" /></p>\');\n
\n
\teditor.setContent(\'<img src="tinymce/ui/img/raster.gif" />\');\n
\teditor.selection.select(editor.dom.select(\'img\')[0]);\n
\teditor.execCommand(\'JustifyCenter\');\n
\tequal(editor.getContent(), \'<p><img style="margin-right: auto; margin-left: auto; display: block;" src="tinymce/ui/img/raster.gif" alt="" /></p>\');\n
\n
\teditor.setContent(\'<img src="tinymce/ui/img/raster.gif" />\');\n
\teditor.selection.select(editor.dom.select(\'img\')[0]);\n
\teditor.execCommand(\'JustifyRight\');\n
\tequal(editor.getContent(), \'<p><img style="float: right;" src="tinymce/ui/img/raster.gif" alt="" /></p>\');\n
});\n
\n
test(\'mceBlockQuote\', function() {\n
\texpect(2);\n
\n
\teditor.focus();\n
\teditor.setContent(\'<p>test 123</p>\');\n
\teditor.execCommand(\'SelectAll\');\n
\teditor.execCommand(\'mceBlockQuote\');\n
\tequal(editor.getContent().replace(/\\s+/g, \'\'), \'<blockquote><p>test123</p></blockquote>\');\n
\n
\teditor.setContent(\'<p>test 123</p><p>test 123</p>\');\n
\teditor.execCommand(\'SelectAll\');\n
\teditor.execCommand(\'mceBlockQuote\');\n
\tequal(editor.getContent().replace(/\\s+/g, \'\'), \'<blockquote><p>test123</p><p>test123</p></blockquote>\');\n
});\n
\n
test(\'FormatBlock\', function() {\n
\texpect(9);\n
\n
\teditor.setContent(\'<p>test 123</p>\');\n
\teditor.execCommand(\'SelectAll\');\n
\teditor.execCommand(\'FormatBlock\', false, \'h1\');\n
\tequal(editor.getContent(), \'<h1>test 123</h1>\');\n
\n
\teditor.execCommand(\'SelectAll\');\n
\teditor.execCommand(\'FormatBlock\', false, \'h2\');\n
\tequal(editor.getContent(), \'<h2>test 123</h2>\');\n
\n
\teditor.execCommand(\'SelectAll\');\n
\teditor.execCommand(\'FormatBlock\', false, \'h3\');\n
\tequal(editor.getContent(), \'<h3>test 123</h3>\');\n
\n
\teditor.execCommand(\'SelectAll\');\n
\teditor.execCommand(\'FormatBlock\', false, \'h4\');\n
\tequal(editor.getContent(), \'<h4>test 123</h4>\');\n
\n
\teditor.execCommand(\'SelectAll\');\n
\teditor.execCommand(\'FormatBlock\', false, \'h5\');\n
\tequal(editor.getContent(), \'<h5>test 123</h5>\');\n
\n
\teditor.execCommand(\'SelectAll\');\n
\teditor.execCommand(\'FormatBlock\', false, \'h6\');\n
\tequal(editor.getContent(), \'<h6>test 123</h6>\');\n
\n
\teditor.execCommand(\'SelectAll\');\n
\n
\ttry {\n
\t\teditor.execCommand(\'FormatBlock\', false, \'div\');\n
\t} catch (ex) {\n
\t\t//t.log(\'Failed: \' + ex.message);\n
\t}\n
\n
\tequal(editor.getContent(), \'<div>test 123</div>\');\n
\n
\teditor.execCommand(\'SelectAll\');\n
\teditor.execCommand(\'FormatBlock\', false, \'address\');\n
\tequal(editor.getContent(), \'<address>test 123</address>\');\n
\n
\teditor.execCommand(\'SelectAll\');\n
\teditor.execCommand(\'FormatBlock\', false, \'pre\');\n
\tequal(editor.getContent(), \'<pre>test 123</pre>\');\n
});\n
\n
test(\'mceInsertLink (relative)\', function() {\n
\texpect(1);\n
\n
\teditor.setContent(\'test 123\');\n
\teditor.execCommand(\'SelectAll\');\n
\teditor.execCommand(\'mceInsertLink\', false, \'test\');\n
\tequal(editor.getContent(), \'<p><a href="test">test 123</a></p>\');\n
});\n
\n
test(\'mceInsertLink (link absolute)\', function() {\n
\texpect(1);\n
\n
\teditor.setContent(\'<p>test 123</p>\');\n
\teditor.execCommand(\'SelectAll\');\n
\teditor.execCommand(\'mceInsertLink\', false, \'http://www.site.com\');\n
\tequal(editor.getContent(), \'<p><a href="http://www.site.com">test 123</a></p>\');\n
});\n
\n
test(\'mceInsertLink (link encoded)\', function() {\n
\texpect(1);\n
\n
\teditor.setContent(\'<p>test 123</p>\');\n
\teditor.execCommand(\'SelectAll\');\n
\teditor.execCommand(\'mceInsertLink\', false, \'"&<>\');\n
\tequal(editor.getContent(), \'<p><a href="&quot;&amp;&lt;&gt;">test 123</a></p>\');\n
});\n
\n
test(\'mceInsertLink (link encoded and with class)\', function() {\n
\texpect(1);\n
\n
\teditor.setContent(\'<p>test 123</p>\');\n
\teditor.execCommand(\'SelectAll\');\n
\teditor.execCommand(\'mceInsertLink\', false, {href : \'"&<>\', \'class\' : \'test\'});\n
\tequal(editor.getContent(), \'<p><a class="test" href="&quot;&amp;&lt;&gt;">test 123</a></p>\');\n
});\n
\n
test(\'mceInsertLink (link with space)\', function() {\n
\texpect(1);\n
\n
\teditor.setContent(\'<p>test 123</p>\');\n
\teditor.execCommand(\'SelectAll\');\n
\teditor.execCommand(\'mceInsertLink\', false, {href : \'foo bar\'});\n
\tequal(editor.getContent(), \'<p><a href="foo%20bar">test 123</a></p>\');\n
});\n
\n
test(\'mceInsertLink (link floated img)\', function() {\n
\texpect(1);\n
\n
\teditor.setContent(\'<p><img style="float: right;" src="about:blank" /></p>\');\n
\teditor.execCommand(\'SelectAll\');\n
\teditor.execCommand(\'mceInsertLink\', false, \'link\');\n
\tequal(editor.getContent(), \'<p><a href="link"><img style="float: right;" src="about:blank" alt="" /></a></p>\');\n
});\n
\n
test(\'mceInsertLink (link adjacent text)\', function() {\n
\tvar rng;\n
\n
\texpect(1);\n
\n
\teditor.setContent(\'<p><a href="#">a</a>b</p>\');\n
\n
\trng = editor.dom.createRng();\n
\trng.setStart(editor.getBody().firstChild.lastChild, 0);\n
\trng.setEnd(editor.getBody().firstChild.lastChild, 1);\n
\teditor.selection.setRng(rng);\n
\n
\teditor.execCommand(\'mceInsertLink\', false, \'link\');\n
\tequal(editor.getContent(), \'<p><a href="#">a</a><a href="link">b</a></p>\');\n
});\n
\n
test(\'mceInsertLink (link text inside text)\', function() {\n
\texpect(1);\n
\n
\teditor.setContent(\'<p><a href="#"><em>abc</em></a></p>\');\n
\tUtils.setSelection(\'em\', 1, \'em\', 2);\n
\n
\teditor.execCommand(\'mceInsertLink\', false, \'link\');\n
\tequal(editor.getContent(), \'<p><a href="link"><em>abc</em></a></p>\');\n
});\n
\n
test(\'mceInsertLink (link around existing links)\', function() {\n
\texpect(1);\n
\n
\teditor.setContent(\'<p><a href="#1">1</a><a href="#2">2</a></p>\');\n
\teditor.execCommand(\'SelectAll\');\n
\n
\teditor.execCommand(\'mceInsertLink\', false, \'link\');\n
\tequal(editor.getContent(), \'<p><a href="link">12</a></p>\');\n
});\n
\n
test(\'mceInsertLink (link around existing links with different attrs)\', function() {\n
\texpect(1);\n
\n
\teditor.setContent(\'<p><a id="a" href="#1">1</a><a id="b" href="#2">2</a></p>\');\n
\teditor.execCommand(\'SelectAll\');\n
\n
\teditor.execCommand(\'mceInsertLink\', false, \'link\');\n
\tequal(editor.getContent(), \'<p><a href="link">12</a></p>\');\n
});\n
\n
test(\'mceInsertLink (link around existing complex contents with links)\', function() {\n
\texpect(1);\n
\n
\teditor.setContent(\'<p><span id="s1"><strong><a id="a" href="#1"><em>1</em></a></strong></span><span id="s2"><em><a id="b" href="#2"><strong>2</strong></a></em></span></p>\');\n
\teditor.execCommand(\'SelectAll\');\n
\n
\teditor.execCommand(\'mceInsertLink\', false, \'link\');\n
\tequal(editor.getContent(), \'<p><a href="link"><span id="s1"><strong><em>1</em></strong></span><span id="s2"><em><strong>2</strong></em></span></a></p>\');\n
});\n
\n
test(\'mceInsertLink (link text inside link)\', function() {\n
\texpect(1);\n
\n
\teditor.setContent(\'<p><a href="#">test</a></p>\');\n
\tUtils.setSelection(\'p\', 0, \'p\', 1);\n
\teditor.execCommand(\'SelectAll\');\n
\n
\teditor.execCommand(\'mceInsertLink\', false, \'link\');\n
\tequal(editor.getContent(), \'<p><a href="link">test</a></p>\');\n
});\n
\n
test(\'mceInsertLink bug #7331\', function() {\n
\teditor.setContent(\'<table><tbody><tr><td>A</td></tr><tr><td>B</td></tr></tbody></table>\');\n
\tvar rng = editor.dom.createRng();\n
\trng.setStart(editor.$(\'td\')[1].firstChild, 0);\n
\trng.setEnd(editor.getBody(), 1);\n
\teditor.selection.setRng(rng);\n
\teditor.execCommand(\'mceInsertLink\', false, {href: \'x\'});\n
\tequal(editor.getContent(), \'<table><tbody><tr><td>A</td></tr><tr><td><a href=\\"x\\">B</a></td></tr></tbody></table>\');\n
});\n
\n
test(\'unlink\', function() {\n
\teditor.setContent(\'<p><a href="test">test</a> <a href="test">123</a></p>\');\n
\teditor.execCommand(\'SelectAll\');\n
\teditor.execCommand(\'unlink\');\n
\tequal(editor.getContent(), \'<p>test 123</p>\');\n
});\n
\n
test(\'subscript/superscript\', function() {\n
\texpect(4);\n
\n
\teditor.setContent(\'<p>test 123</p>\');\n
\teditor.execCommand(\'SelectAll\');\n
\teditor.execCommand(\'subscript\');\n
\tequal(editor.getContent(), \'<p><sub>test 123</sub></p>\');\n
\n
\teditor.setContent(\'<p>test 123</p>\');\n
\teditor.execCommand(\'SelectAll\');\n
\teditor.execCommand(\'superscript\');\n
\tequal(editor.getContent(), \'<p><sup>test 123</sup></p>\');\n
\n
\teditor.setContent(\'<p>test 123</p>\');\n
\teditor.execCommand(\'SelectAll\');\n
\teditor.execCommand(\'subscript\');\n
\teditor.execCommand(\'subscript\');\n
\tequal(editor.getContent(), \'<p>test 123</p>\');\n
\n
\teditor.setContent(\'<p>test 123</p>\');\n
\teditor.execCommand(\'SelectAll\');\n
\teditor.execCommand(\'superscript\');\n
\teditor.execCommand(\'superscript\');\n
\tequal(editor.getContent(), \'<p>test 123</p>\');\n
});\n
\n
test(\'indent/outdent\', function() {\n
\texpect(4);\n
\n
\teditor.setContent(\'<p>test 123</p>\');\n
\teditor.execCommand(\'SelectAll\');\n
\teditor.execCommand(\'Indent\');\n
\tequal(editor.getContent(), \'<p style="padding-left: 30px;">test 123</p>\');\n
\n
\teditor.setContent(\'<p>test 123</p>\');\n
\teditor.execCommand(\'SelectAll\');\n
\teditor.execCommand(\'Indent\');\n
\teditor.execCommand(\'Indent\');\n
\tequal(editor.getContent(), \'<p style="padding-left: 60px;">test 123</p>\');\n
\n
\teditor.setContent(\'<p>test 123</p>\');\n
\teditor.execCommand(\'SelectAll\');\n
\teditor.execCommand(\'Indent\');\n
\teditor.execCommand(\'Indent\');\n
\teditor.execCommand(\'Outdent\');\n
\tequal(editor.getContent(), \'<p style="padding-left: 30px;">test 123</p>\');\n
\n
\teditor.setContent(\'<p>test 123</p>\');\n
\teditor.execCommand(\'SelectAll\');\n
\teditor.execCommand(\'Outdent\');\n
\tequal(editor.getContent(), \'<p>test 123</p>\');\n
});\n
\n
test(\'RemoveFormat\', function() {\n
\texpect(4);\n
\n
\teditor.setContent(\'<p><em>test</em> <strong>123</strong> <a href="123">123</a> 123</p>\');\n
\teditor.execCommand(\'SelectAll\');\n
\teditor.execCommand(\'RemoveFormat\');\n
\tequal(editor.getContent(), \'<p>test 123 <a href="123">123</a> 123</p>\');\n
\n
\teditor.setContent(\'<p><em><em>test</em> <strong>123</strong> <a href="123">123</a> 123</em></p>\');\n
\teditor.execCommand(\'SelectAll\');\n
\teditor.execCommand(\'RemoveFormat\');\n
\tequal(editor.getContent(), \'<p>test 123 <a href="123">123</a> 123</p>\');\n
\n
\teditor.setContent(\'<p><em>test<span id="x">test <strong>123</strong></span><a href="123">123</a> 123</em></p>\');\n
\teditor.selection.select(editor.dom.get(\'x\'));\n
\teditor.execCommand(\'RemoveFormat\');\n
\tequal(editor.getContent(), \'<p><em>test</em><span id="x">test 123</span><em><a href="123">123</a> 123</em></p>\');\n
\n
\teditor.setContent(\'<p><dfn>dfn tag </dfn> <code>code tag </code> <samp>samp tag</samp> <kbd> kbd tag</kbd> <var> var tag</var> <cite> cite tag</cite> <mark> mark tag</mark> <q> q tag</q></p>\');\n
\teditor.execCommand(\'SelectAll\');\n
\teditor.execCommand(\'RemoveFormat\');\n
\tequal(editor.getContent(), \'<p>dfn tag code tag samp tag kbd tag var tag cite tag mark tag q tag</p>\');\n
});\n
\n
test(\'InsertLineBreak\', function() {\n
\teditor.setContent(\'<p>123</p>\');\n
\tUtils.setSelection(\'p\', 2);\n
\teditor.execCommand(\'InsertLineBreak\');\n
\tequal(editor.getContent(), \'<p>12<br />3</p>\');\n
\n
\teditor.setContent(\'<p>123</p>\');\n
\tUtils.setSelection(\'p\', 0);\n
\teditor.execCommand(\'InsertLineBreak\');\n
\tequal(editor.getContent(), \'<p><br />123</p>\');\n
\n
\teditor.setContent(\'<p>123</p>\');\n
\tUtils.setSelection(\'p\', 3);\n
\teditor.execCommand(\'InsertLineBreak\');\n
\tequal(Utils.cleanHtml(editor.getBody().innerHTML), (tinymce.isIE && tinymce.Env.ie < 11) ? \'<p>123<br></p>\': \'<p>123<br><br></p>\');\n
});\n


]]></string> </value>
        </item>
        <item>
            <key> <string>precondition</string> </key>
            <value> <string></string> </value>
        </item>
        <item>
            <key> <string>size</string> </key>
            <value> <int>28842</int> </value>
        </item>
        <item>
            <key> <string>title</string> </key>
            <value> <string>EditorCommands.js</string> </value>
        </item>
      </dictionary>
    </pickle>
  </record>
</ZopeData>
