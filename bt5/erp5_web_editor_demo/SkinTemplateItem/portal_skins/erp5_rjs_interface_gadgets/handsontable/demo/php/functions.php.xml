<?xml version="1.0"?>
<ZopeData>
  <record id="1" aka="AAAAAAAAAAE=">
    <pickle>
      <global name="File" module="OFS.Image"/>
    </pickle>
    <pickle>
      <dictionary>
        <item>
            <key> <string>_EtagSupport__etag</string> </key>
            <value> <string>ts41272276.57</string> </value>
        </item>
        <item>
            <key> <string>__name__</string> </key>
            <value> <string>functions.php</string> </value>
        </item>
        <item>
            <key> <string>content_type</string> </key>
            <value> <string>application/octet-stream</string> </value>
        </item>
        <item>
            <key> <string>data</string> </key>
            <value> <string encoding="cdata"><![CDATA[

<?php\n
\n
function &getConnection(){\n
    $db = new PDO(\'sqlite:cars.sqlite\');\n
    return $db;\n
}\n
\n
function closeConnection ($db){\n
    $db = NULL;\n
}\n
\n
//create the database if does not exist\n
function createCarsTable($db){\n
    $db->exec("CREATE TABLE IF NOT EXISTS cars (id INTEGER PRIMARY KEY, manufacturer TEXT, year INTEGER, price INTEGER)");\n
}\n
\n
function resetCarsTable($db){\n
    dropCarsTable($db);\n
    createCarsTable($db);\n
    loadDefaultCars($db);\n
}\n
\n
function dropCarsTable($db){\n
    $db->exec("DROP TABLE IF EXISTS cars");\n
}\n
\n
function loadDefaultCars($db){\n
    $query = $db->prepare(\'INSERT INTO cars (id, manufacturer, year, price) VALUES(:id, :manufacturer, :year, :price)\');\n
    $data = array(\n
        array(\n
            \'id\' => 1,\n
            \'manufacturer\' => \'Honda\',\n
            \'year\' => 2010,\n
            \'price\' => 200000\n
        ),\n
        array(\n
            \'id\' => 2,\n
            \'manufacturer\' => \'Jaguar\',\n
            \'year\' => 2012,\n
            \'price\' => 400000\n
        ),\n
        array(\n
            \'id\' => 3,\n
            \'manufacturer\' => \'BMW\',\n
            \'year\' => 2000,\n
            \'price\' => 75000\n
        ),\n
        array(\n
            \'id\' => 4,\n
            \'manufacturer\' => \'Mercedes\',\n
            \'year\' => 1980,\n
            \'price\' => 1000\n
        )\n
    );\n
\n
    foreach($data as $index => $value){\n
        $query->bindValue(\':id\', $value[\'id\'], PDO::PARAM_INT);\n
        $query->bindValue(\':manufacturer\', $value[\'manufacturer\'], PDO::PARAM_STR);\n
        $query->bindValue(\':year\', $value[\'year\'], PDO::PARAM_INT);\n
        $query->bindValue(\':price\', $value[\'price\'], PDO::PARAM_INT);\n
        $query->execute();\n
    }\n
}\n
\n
function &loadCars($db){\n
    $select = $db->prepare(\'SELECT * FROM cars ORDER BY id ASC LIMIT 100\');\n
    $select->execute();\n
\n
    return $select;\n
}\n
\n
function carsTableExists($db){\n
    $result = $db->query("SELECT COUNT(*) FROM sqlite_master WHERE type=\'table\' AND name=\'cars\'");\n
\n
    $row = $result->fetch(PDO::FETCH_NUM);\n
\n
    return $row[0] > 0;\n
}

]]></string> </value>
        </item>
        <item>
            <key> <string>precondition</string> </key>
            <value> <string></string> </value>
        </item>
        <item>
            <key> <string>size</string> </key>
            <value> <int>1999</int> </value>
        </item>
        <item>
            <key> <string>title</string> </key>
            <value> <string>functions.php</string> </value>
        </item>
      </dictionary>
    </pickle>
  </record>
</ZopeData>
