[buildout]
parts = imagemagick
extends =
  ../software-profiles/bzip2.cfg
  ../software-profiles/freetype.cfg
  ../software-profiles/ghostscript.cfg
  ../software-profiles/libjpeg.cfg
  ../software-profiles/libpng.cfg
  ../software-profiles/libtiff.cfg
  ../software-profiles/jasper.cfg
  ../software-profiles/jbigkit.cfg
  ../software-profiles/zlib.cfg

[imagemagick]
recipe = hexagonit.recipe.cmmi
url = http://ftp.nluug.nl/ImageMagick/ImageMagick-6.6.5-10.tar.bz2
md5sum = 305bc145200ef5c1f7bba08a12c5f4f2
configure-options =
  --without-x
  --without-magick-plus-plus
  --disable-openmp
  --disable-opencl
  --without-openexr
  --without-gslib
  --with-bzlib=${bzip2:location}
  --with-zlib=${zlib:location}
  --with-frozenpaths
environment =
  PATH=${freetype:location}/bin:${ghostscript:location}/bin:%(PATH)s
  CPPFLAGS=-I${bzip2:location}/include -I${zlib:location}/include -I${jbigkit:location}/include -I${libjpeg:location}/include -I${libtiff:location}/include -I${libpng:location}/include -I${jasper:location}/include -I${freetype:location}/include
  LDFLAGS =-L${bzip2:location}/lib -Wl,-rpath -Wl,${bzip2:location}/lib -Wl,-rpath -Wl,${zlib:location}/lib -L${jbigkit:location}/lib -Wl,-rpath -Wl,${jbigkit:location}/lib -L${libjpeg:location}/lib -Wl,-rpath -Wl,${libjpeg:location}/lib -L${libtiff:location}/lib -Wl,-rpath -Wl,${libtiff:location}/lib -L${libpng:location}/lib -Wl,-rpath -Wl,${libpng:location}/lib -L${jasper:location}/lib -Wl,-rpath -Wl,${jasper:location}/lib -L${freetype:location}/lib -Wl,-rpath -Wl,${freetype:location}/lib
