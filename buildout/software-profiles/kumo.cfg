[buildout]
extends =
  tokyocabinet.cfg
  messagepack.cfg
  openssl.cfg
  zlib.cfg

parts = kumo
find-links = http://www.nexedi.org/static/packages/source/

[kumo-hooks-download]
url = http://www.nexedi.org/static/buildout-hooks/kumo-hooks.py-r41093
md5sum = 958a595a02de75624728f8d65e39d800
recipe = hexagonit.recipe.download
download-only=true
filename = kumo-hooks.py

[kumo]
pre-configure-hook = ${kumo-hooks-download:location}/${kumo-hooks-download:filename}:pre_configure_hook
recipe = erp5.recipe.cmmiforcei686
url = http://github.com/downloads/etolabo/kumofs/kumofs-0.4.12.tar.gz
md5sum = 70fc53a332fb2b76ae6a3aad7aa59aad
configure-options =
  --with-tokyocabinet=${tokyocabinet:location}
  --with-msgpack=${messagepack:location}

environment =
  CPPFLAGS=-I${zlib:location}/include -I${openssl:location}/include
  LDFLAGS=-L${zlib:location}/lib -L${openssl:location}/lib -Wl,-rpath -Wl,${tokyocabinet:location}/lib -Wl,-rpath -Wl,${messagepack:location}/lib -Wl,-rpath -Wl,${zlib:location}/lib -Wl,-rpath -Wl,${openssl:location}/lib
