[buildout]
parts = sphinx

[sphinx-1.10-fix_nosigpipe.patch]
recipe = hexagonit.recipe.download
url = http://www.nexedi.org/static/patches/${:filename}
md5sum = fee62e08ff2b4e546a2058225f18e31d
download-only = true
filename = sphinx-1.10-fix_nosigpipe.patch

[sphinx-1.10-beta-snowball.patch]
recipe = hexagonit.recipe.download
url = http://www.nexedi.org/static/patches/${:filename}
path = ${:filename}
md5sum = 65a5ee78bf27c030734674c018006287
download-only = true
filename = sphinx-1.10-beta-snowball.patch

[sphinx]
recipe = hexagonit.recipe.cmmi
url = http://www.sphinxsearch.com/downloads/sphinx-1.10-beta.tar.gz
md5sum = 5b52ce9e93a73c66d37bc3a2402f14fa
configure-options =
  --with-mysql
  --with-mysql-includes=${mysql-5.1:location}/include/mysql
  --with-mysql-libs=${mysql-5.1:location}/lib/mysql
  --with-libstemmer
  LDFLAGS="-Wl,-rpath ${mysql-5.1:location}/lib/mysql"
patch-options = -p1
patches =
  ${sphinx-1.10-fix_nosigpipe.patch:location}/${sphinx-1.10-fix_nosigpipe.patch:filename}
  ${sphinx-1.10-beta-snowball.patch:location}/${sphinx-1.10-beta-snowball.patch:filename}
environment =

[requirements]
binary = patch gcc g++
