[buildout]
extends = openssl.cfg
parts = postfix

[postfix-hooks-download]
recipe = hexagonit.recipe.download
url = http://www.nexedi.org/static/buildout-hooks/postfix-hooks.py-r43221
filename = postfix-hooks.py
md5sum = 87cb2347c2ba81093544885a5342cb09
download-only = true

[postfix]
recipe = hexagonit.recipe.cmmi
url = ftp://postfix.eu.org/pub/postfix/official/postfix-2.6.5.tar.gz
md5sum = 6b954cfb3eb6141dac1e773281211717
location = ${buildout:parts-directory}/${:_buildout_section_name_}
pre-make-hook = ${postfix-hooks-download:location}/${postfix-hooks-download:filename}:pre_make_hook
configure-command = make
configure-options = makefiles CCARGS='-DUSE_TLS -I${openssl:location}/include' AUXLIBS='-L${openssl:location}/lib -lssl -lcrypto'
make-targets = ; /bin/sh postfix-install -non-interactive -package install_root=${:location}
