[buildout]
extends =
  cmake.cfg
parts = cuneiform

[cuneiform-source]
recipe = hexagonit.recipe.download
strip-top-level-dir = true
url = http://launchpad.net/cuneiform-linux/1.0/1.0/+download/cuneiform-linux-1.0.0.tar.bz2
md5sum = 785232ffffad7d82446fbac08a1c3ef9

[cuneiform]
recipe = plone.recipe.command
stop-on-error = true
update-command = ${:command}
location = ${buildout:parts-directory}/${:_buildout_section_name_}
workdir = ${:location}__work__
command = rm -rf ${:workdir} ${:location} && mkdir ${:workdir} ${:location} && cd ${:workdir} && ${cmake:location}/bin/cmake -DCMAKE_INSTALL_RPATH=${:location}/lib64:${:location}/lib -DCMAKE_INSTALL_PREFIX=${:location} -DNO_SYSTEM_ENVIRONMENT_PATH=ON -DCMAKE_BUILD_TYPE=release ${cuneiform-source:location}  && make install && rm -rf ${:workdir}
