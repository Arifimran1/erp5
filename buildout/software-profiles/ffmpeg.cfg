[buildout]
extends = 
  bzip2.cfg
  libpng.cfg
  pkgconfig.cfg
  zlib.cfg

parts = 
  ffmpeg

[ffmpeg]
<= ffmpeg-0.6

[libogg]
recipe = hexagonit.recipe.cmmi
url = http://downloads.xiph.org/releases/ogg/libogg-1.2.2.tar.gz
md5sum = 5a9fcabc9a1b7c6f1cd75ddc78f36c56

[libvorbis]
recipe = hexagonit.recipe.cmmi
url = http://downloads.xiph.org/releases/vorbis/libvorbis-1.3.2.tar.bz2
md5sum = 798a4211221073c1409f26eac4567e8b
environment = 
  PATH=${pkgconfig:location}/bin:%(PATH)s
  PKG_CONFIG_PATH=${libogg:location}/lib/pkgconfig

[libtheora]
recipe = hexagonit.recipe.cmmi
url = http://downloads.xiph.org/releases/theora/libtheora-1.1.1.tar.bz2
md5sum = 292ab65cedd5021d6b7ddd117e07cd8e
environment = 
  PATH=${pkgconfig:location}/bin:%(PATH)s
  PKG_CONFIG_PATH=${libogg:location}/lib/pkgconfig:${libpng:location}/lib/pkgconfig:${libvorbis:location}/lib/pkgconfig

[yasm]
recipe = hexagonit.recipe.cmmi
url = http://www.tortall.net/projects/yasm/releases/yasm-1.1.0.tar.gz

[libvpx]
recipe = hexagonit.recipe.cmmi
url = http://webm.googlecode.com/files/libvpx-v0.9.6.tar.bz2
md5sum = 383f3f07a76099682abb43f79b692b72
configure-options = 
 --enable-shared
environment = 
  PATH=${yasm:location}/bin:%(PATH)s

[ffmpeg-0.6]
recipe = hexagonit.recipe.cmmi
url = http://www.ffmpeg.org/releases/ffmpeg-0.6.2.tar.bz2
md5sum = f7819307dad55aa0d6b40ac0e862884d
configure-options = 
 --enable-gpl
 --enable-postproc
 --enable-bzlib
 --enable-libtheora
 --enable-libvpx
 --enable-shared
 --enable-zlib
 --disable-static
 --extra-ldflags="-Wl,-rpath -Wl,${buildout:parts-directory}/${:_buildout_section_name_}/lib"
environment = 
  CPPFLAGS=-I${bzip2:location}/include -I${libogg:location}/include -I${libvorbis:location}/include -I${libtheora:location}/include -I${libvpx:location}/include -I${zlib:location}/include
  LDFLAGS=-L${bzip2:location}/lib -Wl,-rpath -Wl,${bzip2:location}/lib -L${libogg:location}/lib -Wl,-rpath -Wl,${libogg:location}/lib -L${libvorbis:location}/lib -Wl,-rpath -Wl,${libvorbis:location}/lib -L${libtheora:location}/lib -Wl,-rpath -Wl,${libtheora:location}/lib -L${libvpx:location}/lib -Wl,-rpath -Wl,${libvpx:location}/lib -L${zlib:location}/lib -Wl,-rpath -Wl,${zlib:location}/lib
  PATH=${yasm:location}/bin:%(PATH)s
