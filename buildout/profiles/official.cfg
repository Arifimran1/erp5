[buildout]
extends =
  ../instance-profiles/mysql.cfg
  ../instance-profiles/oood.cfg
  ../instance-profiles/supervisor.cfg
  ../instance-profiles/zope.cfg
  ../profiles/versions.cfg
  ../software-profiles/apache.cfg
  ../software-profiles/erp5.cfg
  ../software-profiles/flare.cfg
  ../software-profiles/haproxy.cfg
  ../software-profiles/imagemagick.cfg
  ../software-profiles/libevent.cfg
  ../software-profiles/memcached.cfg
  ../software-profiles/mysql-tritonn-5.0.cfg
  ../software-profiles/ocropus.cfg
  ../software-profiles/oood.cfg
  ../software-profiles/openoffice-bin.cfg
  ../software-profiles/python-2.4.cfg
  ../software-profiles/varnish.cfg
  ../software-profiles/zope-2.8.cfg

var-directory = ${:directory}/var
etc-directory = ${:var-directory}/etc
log-directory = ${:var-directory}/log
data-bin-directory = ${:var-directory}/bin

eggs-directory = ${software_definition:software_home}/eggs
develop-eggs-directory = ${software_definition:software_home}/develop-eggs

python = software_definition
versions = versions
find-links =
    http://download.zope.org/distribution/
    http://download.hforge.org/itools/0.20/
    http://download.hforge.org/itools/
    http://dist.repoze.org
    http://www.nexedi.org/static/packages/source/

parts =
  pythonbin
  eggs
  apache
  memcached
#  ocropus
#  haproxy
  varnish
  mysql-tritonn-5.0
  zope-2.8
  cmf15
  itools
  mysql-python
  products-other
  products-deps
  products-erp5
  products-development
  bt5-erp5
  openoffice-bin
  oood

[configuration]
erp5_products_revision =
erp5_bt5_revision = ${:erp5_products_revision}

[show-requirements]
recipe = plone.recipe.command
command =
  echo "Required binary files: ${requirements:binary}"
  echo "Required header files: ${requirements:development}"
update-command = ${:command}

[create-directories]
recipe = plone.recipe.command
command =
  mkdir -p ${buildout:etc-directory}
  mkdir -p ${buildout:var-directory}
  mkdir -p ${buildout:log-directory}
  mkdir -p ${buildout:data-bin-directory}

[software_definition]
software_home = ${buildout:directory}
mysql_software = ${:software_home}/parts/mysql-tritonn-5.0
oood_software = ${:software_home}/parts/oood
openoffice_software = ${:software_home}/parts/openoffice-bin
zope_software = ${:software_home}/parts/zope-2.8
executable = ${:software_home}/parts/python${buildout:python_version}/bin/python${buildout:python_version}
