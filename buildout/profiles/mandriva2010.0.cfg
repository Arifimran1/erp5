[buildout]
# temporary solution for fast system preparation to run buildout
develop = recipes/createmandrivaspec
parts =

[dependency]
recipe = plone.recipe.command
package_list =
  bison
  cpio
  flex
  gcc
  gcc-c++
  libbzip2-devel
  libgdbm-devel
  libglib2.0-devel
  libjpeg-devel
  libncurses-devel
  libopenssl-devel
  libtermcap-devel
  libxml2-devel
  libxslt-devel
  make
  patch
  rpm
  subversion
  subversion-devel
  subversion-tools
  x11-server-xvfb
  zlib1-devel

command = echo "${:package_list}" | xargs sudo urpmi --auto
update_command = ${:command}

[create-spec]
recipe = createmandrivaspec

input = ${buildout:directory}/templates/${:base}.in
output = ${buildout:directory}/${:base}
name = erp5-official-buildout
version = ${buildout:directory}/VERSION.txt
package_list = ${dependency:package_list}
svnpath = https://svn.erp5.org/repos/public/erp5/trunk/buildout

# only a helper variable
base = erp5-official-buildout-mandriva2010.spec

[create-rpm]
recipe = plone.recipe.command
command = sudo rpmbuild -bb ${create-spec:output}
update_command = ${:command}
