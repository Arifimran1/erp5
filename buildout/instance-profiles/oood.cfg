[buildout]
parts = oood-instance

[oood-instance]
depends =
  ${oood-directories:command}
recipe = erp5.recipe.ooodinstance
wrapper_path = ${buildout:data-bin-directory}/oood-runserw
oood_conf_file = ${buildout:etc-directory}/oood.conf

wrapper_part = oood-wrapper
configuration_part = oood-configuration
supervisor-priority = 20
supervisor-program =
  ${:supervisor-priority} ${:_buildout_section_name_} (autorestart=true stopsignal=TERM stopwaitsecs=30) ${buildout:data-bin-directory}/oood-runserw ${buildout:etc-directory}

[oood-wrapper]
openoffice_python = ${software_definition:openoffice_software}/program/python
oood_pid = ${oood-configuration:oood_run}/server_pid.lock
openoffice_uno = ${oood-configuration:openoffice_uno}
oood_software = ${oood-configuration:oood_software}

[oood-configuration]
oood_software = ${software_definition:oood_software}
oood_run = ${buildout:var-directory}/oood
oood_tmp = ${:oood_run}
oood_host = 127.0.0.1
oood_port = ${configuration:oood_port}
oood_pool_host = localhost
oood_pool_range_start = ${configuration:oood_pool_range_start}
oood_instance_load_time = 20
oood_instance_timeout = 360
oood_virtual_display_id = 99
openoffice_uno = ${software_definition:openoffice_software}/basis-link/program/
openoffice_program = ${software_definition:openoffice_software}/program
oood_log_file = ${buildout:log-directory}/oood.log

[configuration]
oood_port = 8008
oood_pool_range_start = 4060

[oood-directories]
recipe = plone.recipe.command
depends = ${create-directories:command}
command = mkdir -p ${oood-configuration:oood_run}
update-command = ${:command}

[conversion-server-template]
<= oood-instance
